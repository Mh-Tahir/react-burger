(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{100:function(e,t,n){e.exports={container:"error-404_container__2jkft"}},11:function(e,t,n){e.exports={container:"feed_container__3PKn1",wcontainer:"feed_wcontainer__14WYw",header:"feed_header__3RFJI",flex:"feed_flex__U69bn",dflex:"feed_dflex__bGBxY feed_flex__U69bn",sflex:"feed_sflex__1e3KL",wrflex:"feed_wrflex__34zDN",wflex:"feed_wflex__19mj5 feed_wrflex__34zDN",cflex:"feed_cflex__1oA6s",image:"feed_image__2QfrB",icon:"feed_icon__2WwPR",plusicon:"feed_plusicon__2FGVF feed_icon__2WwPR",count:"feed_count__3FNFH",orders:"feed_orders__45odD",data:"feed_data__1nIaF",ready:"feed_ready__3ToET"}},185:function(e,t,n){},186:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(34),s=n.n(a),i=n(29),o=n.n(i),l=n(3),u=n(12),d=n(7),j=n(0),b=function(){var e=Object(u.j)("/"),t=Object(u.j)("/feed"),n=Object(u.j)("/profile"),c=Object(u.j)("/profile/orders"),r=function(e){return!!e&&e.isExact};return Object(j.jsx)("header",{className:o.a.header,children:Object(j.jsxs)("div",{className:o.a.container,children:[Object(j.jsxs)("div",{className:o.a.logomenu,children:[Object(j.jsxs)("nav",{className:o.a.menu,children:[Object(j.jsxs)(d.b,{to:"/",className:o.a.btn+" p-5 mt-4 mb-4 mr-2",children:[Object(j.jsx)(l.BurgerIcon,{type:r(e)?"primary":"secondary"}),Object(j.jsx)("p",{className:"pl-2 text text_type_main-default  + ".concat(r(e)?"":"text_color_inactive"),children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(j.jsxs)(d.b,{to:"/feed",className:o.a.btn+" p-5  mt-4 mb-4",children:[Object(j.jsx)(l.ListIcon,{type:r(t)?"primary":"secondary"}),Object(j.jsx)("p",{className:"pl-2 text text_type_main-default  + ".concat(r(t)?"":"text_color_inactive"),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(j.jsx)(d.b,{to:"/",children:Object(j.jsx)(l.Logo,{})})]}),Object(j.jsxs)(d.b,{to:"/profile",className:o.a.btn+" p-5 mt-4 mb-4",children:[Object(j.jsx)(l.ProfileIcon,{type:r(n)||r(c)?"primary":"secondary"}),Object(j.jsx)("p",{className:"pl-2 text text_type_main-default  + ".concat(r(n)||r(c)?"":"text_color_inactive"),children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})})},p=n(26),m=n.n(p),x=n(31),f=x.c,_=function(){return Object(x.b)()},O=function(){var e=Object(u.i)().id,t=f((function(e){return e.ingredients.element}));return t=f((function(e){return e.ingredients.ingredients})).find((function(t){return t._id===e}))||t,Object(j.jsxs)("div",{className:m.a.container+" pt-10 pr-10 pb-10 pl-10",children:[Object(j.jsx)("p",{className:m.a.flex+" text text_type_main-large mt-3 mb-3",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(j.jsxs)("div",{className:m.a.flex,children:[Object(j.jsx)("img",{src:t.image_large,alt:t.name}),Object(j.jsx)("p",{className:"text text_type_main-medium mt-4 mb-8",children:t.name}),Object(j.jsxs)("ul",{className:m.a.structure+" pb-5",children:[Object(j.jsxs)("li",{className:m.a.flex,children:[Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive mr-5",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(j.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.calories})]}),Object(j.jsxs)("li",{className:m.a.flex,children:[Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive mr-5",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(j.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.proteins})]}),Object(j.jsxs)("li",{className:m.a.flex,children:[Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive mr-5",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(j.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.fat})]}),Object(j.jsxs)("li",{className:m.a.flex,children:[Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(j.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.carbohydrates})]})]})]})]})},h=n(54),v=n.n(h),g=n(96),N=n.n(g),y=function(e){var t=e.onClose;return Object(j.jsx)("div",{className:N.a.container,onClick:t})},w=document.getElementById("modal"),k=function(e){var t=e.children,n=e.onClose;return Object(c.useEffect)((function(){var e=function(e){return"Escape"===e.code?n():null};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[n]),s.a.createPortal(Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:v.a.wrap,children:Object(j.jsxs)("div",{className:v.a.container,children:[t,Object(j.jsx)("div",{className:v.a.btn+" mt-5 pt-10 pr-10",onClick:n,children:Object(j.jsx)(l.CloseIcon,{type:"primary"})})]})}),Object(j.jsx)(y,{onClose:n})]}),w)},C="https://norma.nomoreparties.space/api",E="SET_INGREDIENTS",S="SET_ELEMENT",T="SET_ORDER_NUMBER",I="ADD_ELEMENT",D="DELETE_ELEMENT",F="DELETE_ORDER",R="MOVE_ELEMENT",P="SIGN_IN",B="SIGN_OUT",L="WS_CONNECTION_START",W="WS_CONNECTION_CLOSED",M="WS_CONNECTION_SUCCESS",U="WS_CONNECTION_ERROR",A="WS_GET_MESSAGE",G="GET_ORDER",z=function(e){return e.ok?e.json():Promise.reject(new Error("\u041e\u0448\u0438\u0431\u043a\u0430"))},H=function(){return function(e){fetch(C+"/ingredients").then((function(e){return z(e)})).then((function(t){return e({type:E,ingredients:t.data})})).catch((function(e){return console.log(e.message)}))}},J=n(4),Q=n(97),Y=n.n(Q),q=n(22),Z=n.n(q),X=n(192),V=function(e){var t=e.e,n=e.openWindow,c=f((function(e){return e.order.elements})),r=function(e){return"bun"===e.type?2*c.filter((function(t){return t._id===e._id})).length:c.filter((function(t){return t._id===e._id})).length},a=Object(X.a)({type:"e",item:t,collect:function(e){return{isDrag:e.isDragging()}}}),s=Object(J.a)(a,2),i=s[0].isDrag,o=s[1];return Object(j.jsx)(j.Fragment,{children:!i&&Object(j.jsxs)("li",{ref:o,className:Z.a.element+" ml-4 mr-2",onClick:function(){return n(t)},children:[r(t)>0&&Object(j.jsx)(l.Counter,{count:r(t),size:"default"}),Object(j.jsx)("img",{src:t.image,alt:t.name,className:"pl-4 pr-4",width:"240"}),Object(j.jsxs)("div",{className:Z.a.price+" mt-1 mb-1",children:[Object(j.jsx)("p",{className:"pr-1 text text_type_digits-default",children:t.price}),Object(j.jsx)(l.CurrencyIcon,{type:"primary"})]}),Object(j.jsx)("p",{className:Z.a.name+" text text_type_main-small",children:t.name})]})})},$=function(e){var t=e.openWindow,n=Object(c.useState)("bun"),r=Object(J.a)(n,2),a=r[0],s=r[1],i=f((function(e){return e.ingredients})).ingredients;Object(c.useEffect)((function(){var e=document.querySelector("[class^='burger-ingredients_ingredients']");function t(){if(e){var t=null===e||void 0===e?void 0:e.scrollTop;s(t>=0&&t<294?"bun":t>=294&&t<788?"sauce":"main")}}return null===e||void 0===e||e.addEventListener("scroll",t),function(){null===e||void 0===e||e.removeEventListener("scroll",t)}}),[]);var o=function(e){s(e);var t=document.querySelector("[class^='burger-ingredients_ingredients']");t&&(t.scrollTop={bun:0,sauce:295,main:788}["".concat(e)])};return Object(j.jsxs)("section",{className:Z.a.container,children:[Object(j.jsx)("p",{className:"mt-10 mb-5 text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(j.jsxs)("nav",{className:Z.a.flex,children:[Object(j.jsx)(l.Tab,{value:"bun",active:"bun"===a,onClick:function(){return o("bun")},children:"\u0411\u0443\u043b\u043a\u0438"}),Object(j.jsx)(l.Tab,{value:"sauce",active:"sauce"===a,onClick:function(){return o("sauce")},children:"\u0421\u043e\u0443\u0441\u044b"}),Object(j.jsx)(l.Tab,{value:"main",active:"main"===a,onClick:function(){return o("main")},children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(j.jsxs)("div",{className:Z.a.ingredients,children:[Object(j.jsx)("p",{className:"mt-10 mb-6 text text_type_main-medium",children:"\u0411\u0443\u043b\u043a\u0438"}),Object(j.jsx)("ul",{className:Z.a.list,children:i.map((function(e){return"bun"===e.type&&Object(j.jsx)(V,{openWindow:t,e:e},e._id)}))}),Object(j.jsx)("p",{className:"mt-10 mb-6 text text_type_main-medium",children:"\u0421\u043e\u0443\u0441\u044b"}),Object(j.jsx)("ul",{className:Z.a.list,children:i.map((function(e){return"sauce"===e.type&&Object(j.jsx)(V,{openWindow:t,e:e},e._id)}))}),Object(j.jsx)("p",{className:"mt-10 mb-6 text text_type_main-medium",children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0430"}),Object(j.jsx)("ul",{className:Z.a.list,children:i.map((function(e){return"main"===e.type&&Object(j.jsx)(V,{openWindow:t,e:e},e._id)}))})]})]})},K=n(43),ee=n(19),te=n.n(ee),ne=n(193),ce=function(e){var t=e.e,n=e.onClose,r=e.id,a=e.index,s=e.moveCard,i=Object(c.useRef)(null),o=Object(ne.a)({accept:"inOrder",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var n;if(i.current){var c=e.index,r=a;if(c!==r){var o=null===(n=i.current)||void 0===n?void 0:n.getBoundingClientRect(),l=(o.bottom-o.top)/2,u=t.getClientOffset();if(u){var d=u.y-o.top;c<r&&d<l||c>r&&d>l||(s(c,r),e.index=r)}}}}}),u=Object(J.a)(o,2),d=u[0].handlerId,b=u[1],p=Object(X.a)({type:"inOrder",item:function(){return{id:r,index:a}},collect:function(e){return{isDrag:e.isDragging()}}}),m=Object(J.a)(p,2),x=m[0].isDrag;return(0,m[1])(b(i)),Object(j.jsx)(j.Fragment,{children:!x&&Object(j.jsxs)("li",{ref:i,className:te.a.element+" mb-4 mr-2 ml-4","data-handler-id":d,children:[Object(j.jsx)(l.DragIcon,{type:"primary"}),Object(j.jsx)(l.ConstructorElement,{text:t.name,price:t.price,thumbnail:t.image,handleClose:n})]})})},re=n(99),ae=n.n(re),se=n(6),ie=n.n(se),oe=n(10),le=function(){var e=Object(oe.a)(ie.a.mark((function e(t,n,c,r){var a,s,i,o,l,u,d;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={"Content-Type":"application/json",Authorization:""},s="GET"===c?{method:c,headers:a}:{method:c,headers:a,body:""},(i=xe("accessToken"))&&(s.headers.Authorization=i),n&&(s.body=JSON.stringify(n)),e.next=8,fetch("".concat(t),s);case 8:return o=e.sent,e.next=11,o.json();case 11:if(!(l=e.sent).success){e.next=14;break}return e.abrupt("return",l);case 14:if("jwt expired"!==l.message){e.next=27;break}return e.next=17,me();case 17:if(!(u=e.sent).success){e.next=26;break}return s.headers.Authorization=u.accessToken,e.next=22,fetch("".concat(t),s);case 22:return d=e.sent,e.next=25,d.json();case 25:return e.abrupt("return",e.sent);case 26:return e.abrupt("return",u);case 27:return e.abrupt("return",l);case 30:e.prev=30,e.t0=e.catch(0),console.log(e.t0);case 33:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(t,n,c,r){return e.apply(this,arguments)}}(),ue=function(){var e=Object(oe.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(C,"/password-reset"),{email:t},"POST"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(oe.a)(ie.a.mark((function e(t,n){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(C,"/password-reset/reset"),{password:t,token:n},"POST"));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),je=function(){var e=Object(oe.a)(ie.a.mark((function e(t,n,c){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le("".concat(C,"/auth/register"),{email:t,name:n,password:c},"POST"));case 1:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),be=function(){var e=Object(oe.a)(ie.a.mark((function e(t,n){var c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le("".concat(C,"/auth/login"),{email:t,password:n},"POST");case 2:return(c=e.sent).success&&(fe("accessToken",c.accessToken),localStorage.setItem("refreshToken",c.refreshToken)),e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),pe=function(){var e=Object(oe.a)(ie.a.mark((function e(){var t;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le("".concat(C,"/auth/logout"),{token:localStorage.getItem("refreshToken")},"POST");case 2:return(t=e.sent).success&&(_e("accessToken"),localStorage.removeItem("refreshToken")),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(oe.a)(ie.a.mark((function e(){var t,n;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("refreshToken")){e.next=3;break}return e.abrupt("return",{sussess:!1});case 3:return e.next=5,le("".concat(C,"/auth/token"),{token:t},"POST");case 5:return(n=e.sent).success?(fe("accessToken",n.accessToken),localStorage.setItem("refreshToken",n.refreshToken)):(_e("accessToken"),localStorage.removeItem("refreshToken")),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xe=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},fe=function(e,t,n){var c=(n=n||{}).expires;if("number"==typeof c&&c){var r=new Date;r.setTime(r.getTime()+1e3*c),c=n.expires=r}c&&c.toUTCString&&(n.expires=c.toUTCString());var a=e+"="+(t=encodeURIComponent(t));for(var s in n){a+="; "+s;var i=n[s];!0!==i&&(a+="="+i)}document.cookie=a},_e=function(e){fe(e,"",{expires:-1})},Oe=function(e){var t=e.openWindow,n=_(),r=f((function(e){return e.order.elements})),a=Object(c.useState)(r),s=Object(J.a)(a,2),i=s[0],o=s[1],d=Object(u.g)(),b=xe("accessToken")||"";Object(c.useEffect)((function(){o(r)}),[r]);var p=function(){t();var e,c,a=r.filter((function(e){return"bun"===e.type})),s=Object(J.a)(a,1)[0],i=[].concat(Object(K.a)(r),[s]);n((e=i,c=b,function(t){fetch(C+"/orders",{method:"POST",headers:{"Content-Type":"application/json",Authorization:c},body:JSON.stringify({ingredients:e.map((function(e){return e._id}))})}).then((function(e){return z(e)})).then((function(e){return t({type:T,number:e.order.number})})).catch((function(e){return console.log(e.message)}))}))},m=Object(ne.a)({accept:"e",drop:function(e){n({type:I,element:e})}}),x=Object(J.a)(m,2)[1],O=Object(ne.a)({accept:"inOrder",drop:function(e){n({type:R,cards:i})}}),h=Object(J.a)(O,2)[1],v=Object(c.useCallback)((function(e,t){var n=i[e];o(ae()(i,{$splice:[[e,1],[t,0,n]]}))}),[i]);return Object(j.jsxs)("section",{className:te.a.container,children:[Object(j.jsx)("div",{ref:x,className:te.a.locked,children:Object(j.jsxs)("ul",{className:te.a.list,children:[r.map((function(e){return"bun"===e.type&&Object(j.jsx)("li",{className:te.a.element+" mb-4 mr-2 ml-4 pl-8",children:Object(j.jsx)(l.ConstructorElement,{type:"top",isLocked:!0,text:e.name+" (\u0432\u0435\u0440\u0445)",price:e.price,thumbnail:e.image})},e._id+"1")})),Object(j.jsx)("div",{ref:h,className:te.a.ingredients,children:Object(j.jsxs)("ul",{className:te.a.list,children:[!r.length&&Object(j.jsx)("li",{className:te.a.space+" text text_type_main-large"}),r.map((function(e,t){return"bun"!==e.type?Object(j.jsx)(ce,{e:e,onClose:function(){return function(e){n({type:D,id:e._id})}(e)},index:t,id:e._id,moveCard:v},t):null}))]})}),r.map((function(e){return"bun"===e.type&&Object(j.jsx)("li",{className:te.a.element+" mr-2 ml-4 pl-8",children:Object(j.jsx)(l.ConstructorElement,{type:"bottom",isLocked:!0,text:e.name+" (\u043d\u0438\u0437)",price:e.price,thumbnail:e.image})},e._id+"2")}))]})}),Object(j.jsxs)("div",{className:te.a.order+" pt-10 pr-4 pl-4",children:[Object(j.jsxs)("div",{className:te.a.flex+" mr-10",children:[Object(j.jsx)("p",{className:"pr-2 text text_type_digits-medium",children:r.filter((function(e){return"bun"!==e.type})).reduce((function(e,t){return e+t.price}),0)+r.filter((function(e){return"bun"===e.type})).reduce((function(e,t){return e+2*t.price}),0)}),Object(j.jsx)(l.CurrencyIcon,{type:"primary"})]}),Object(j.jsx)(l.Button,{type:"primary",size:"large",onClick:function(){r.find((function(e){return"bun"===e.type}))&&(b?p():d.push("/login"))},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})},he=n(55),ve=n.n(he),ge=function(e){var t=e.onClose,n=f((function(e){return e.order}));return Object(j.jsx)("div",{className:ve.a.container,children:Object(j.jsxs)("div",{className:ve.a.flex,onClick:t,children:[n.number?Object(j.jsxs)("p",{className:"text text_type_digits-large mt-20",children:[" ",n.number]}):Object(j.jsx)("p",{className:ve.a.loading+" text text_type_main-large mt-20",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"}),Object(j.jsx)("div",{className:"text text_type_main-medium mt-8",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(j.jsx)("div",{className:"mb-25 mt-25 pt-1 pb-1",children:Object(j.jsx)(l.CheckMarkIcon,{type:"primary"})}),Object(j.jsx)("p",{className:"text text_type_main-default mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-20",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})})},Ne=n(102),ye=n(191),we=function(){var e=Object(c.useState)(!1),t=Object(J.a)(e,2),n=t[0],r=t[1],a=_(),s=Object(u.g)();Object(c.useEffect)((function(){a(H())}),[a]);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("main",{className:Y.a.container,children:Object(j.jsxs)(ye.a,{backend:Ne.a,children:[Object(j.jsx)($,{openWindow:function(e){s.push("/ingredients/".concat(e._id),{background:s.location})}}),Object(j.jsx)(Oe,{openWindow:function(){r(!n)}})]})}),n&&Object(j.jsx)(k,{onClose:function(){return a({type:F}),void r(!1)},children:Object(j.jsx)(ge,{onClose:r})})]})},ke=n(5),Ce=n(23),Ee=n.n(Ce),Se=function(){var e=Object(c.useState)(""),t=Object(J.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(J.a)(a,2),i=s[0],o=s[1],b=Object(c.useState)(""),p=Object(J.a)(b,2),m=p[0],x=p[1],O=_(),h=Object(u.g)(),v=f((function(e){return e.auth})).accessToken,g=Object(c.useState)(!1),N=Object(J.a)(g,2),y=N[0],w=N[1],k=Object(c.useCallback)(Object(oe.a)(ie.a.mark((function e(){var t;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le("".concat(C,"/auth/user"),null,"GET",v);case 3:if(!(t=e.sent).success){e.next=8;break}return e.abrupt("return",Object(ke.a)({},t.user));case 8:return e.abrupt("return",{name:"",email:""});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[v]),E=Object(c.useCallback)(function(){var e=Object(oe.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le("".concat(C,"/auth/user"),t,"PATCH",v);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v]),S=function(){var e=Object(oe.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),E({name:n,email:i}),w(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(oe.a)(ie.a.mark((function e(){var t,n,c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k();case 3:t=e.sent,n=t.name,c=t.email,r(n),o(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:w(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(oe.a)(ie.a.mark((function e(){var t;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe();case 2:(t=e.sent).success?(O({type:B}),h.replace({pathname:"/login"})):console.log(t.message);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){(function(){var e=Object(oe.a)(ie.a.mark((function e(){var t,n,c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k();case 3:t=e.sent,n=t.name,c=t.email,r(n),o(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[k]),Object(j.jsx)("div",{className:Ee.a.container+" pt-30",children:Object(j.jsxs)("div",{className:Ee.a.flex,children:[Object(j.jsxs)("aside",{className:Ee.a.aside+" pl-5 pr-15",children:[Object(j.jsx)("div",{className:Ee.a.link+" text text_type_main-medium",children:Object(j.jsx)(d.b,{to:"/profile",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(j.jsx)("div",{className:Ee.a.link+" text text_type_main-medium text_color_inactive",children:Object(j.jsx)(d.b,{to:"/profile/orders",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(j.jsx)("div",{onClick:I,className:Ee.a.link+" text text_type_main-medium text_color_inactive",children:Object(j.jsx)(d.b,{to:"/login",children:"\u0412\u044b\u0445\u043e\u0434"})}),Object(j.jsx)("div",{className:Ee.a.info+" pt-20 text text_type_main-default text_color_inactive",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),Object(j.jsxs)("div",{className:Ee.a.inputs,children:[Object(j.jsxs)("form",{className:Ee.a.inputs+" text_color_inactive",onSubmit:S,children:[Object(j.jsx)(l.Input,{name:"name",value:n,placeholder:"\u0418\u043c\u044f",icon:"EditIcon",onChange:function(e){r(e.target.value),w(!0)}}),Object(j.jsx)("div",{className:Ee.a.inputs+" mt-6 mb-6 text_color_inactive",children:Object(j.jsx)(l.Input,{name:"email",value:i,placeholder:"\u041b\u043e\u0433\u0438\u043d",icon:"EditIcon",onChange:function(e){o(e.target.value),w(!0)}})}),Object(j.jsx)(l.PasswordInput,{name:"password",value:m,onChange:function(e){return x(e.target.value)}}),y&&Object(j.jsx)("div",{className:"pt-6 pb-2",children:Object(j.jsx)(l.Button,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),y&&Object(j.jsx)(l.Button,{type:"secondary",onClick:T,children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})]})})},Te=n(44),Ie=n.n(Te),De=function(){var e=Object(c.useState)(""),t=Object(J.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(J.a)(a,2),i=s[0],o=s[1],b=_(),p=Object(u.g)(),m=function(){var e=Object(oe.a)(ie.a.mark((function e(t){var c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,be(n,i);case 3:(c=e.sent).success?(b({type:P}),p.replace(p.location.state&&p.location.state.from.pathname||"/")):console.log(c.message);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:Ie.a.flex,children:[Object(j.jsxs)("form",{className:Ie.a.flex,onSubmit:m,children:[Object(j.jsx)("div",{className:"text text_type_main-medium pt-15",children:"\u0412\u0445\u043e\u0434"}),Object(j.jsx)("div",{className:Ie.a.input+" pt-6",children:Object(j.jsx)(l.EmailInput,{onChange:function(e){return r(e.target.value)},name:"email",value:n})}),Object(j.jsx)("div",{className:Ie.a.input+" pt-6 pb-6",children:Object(j.jsx)(l.PasswordInput,{onChange:function(e){return o(e.target.value)},name:"password",value:i})}),Object(j.jsx)(l.Button,{children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(j.jsxs)("div",{className:"pt-20 text text_type_main-default text_color_inactive",children:["\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",Object(j.jsx)(d.b,{className:" pl-2",to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(j.jsxs)("div",{className:"pt-4 text text_type_main-default text_color_inactive",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(j.jsx)(d.b,{className:"pl-2",to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})},Fe=n(35),Re=n.n(Fe),Pe=function(){var e=Object(c.useState)(""),t=Object(J.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(J.a)(a,2),i=s[0],o=s[1],b=Object(c.useState)(""),p=Object(J.a)(b,2),m=p[0],x=p[1],f=Object(u.g)(),_=function(){var e=Object(oe.a)(ie.a.mark((function e(t){var c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,je(i,m,n);case 3:(c=e.sent).success?f.push("/"):console.log(c.message);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:Re.a.flex,children:[Object(j.jsxs)("form",{className:Re.a.flex,onSubmit:_,children:[Object(j.jsx)("div",{className:"text text_type_main-medium pt-15",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(j.jsx)("div",{className:Re.a.input+" pt-6",children:Object(j.jsx)(l.Input,{value:n,placeholder:"\u0418\u043c\u044f",icon:"EditIcon",onChange:function(e){return r(e.target.value)}})}),Object(j.jsx)("div",{className:Re.a.input+" pt-6",children:Object(j.jsx)(l.EmailInput,{onChange:function(e){return o(e.target.value)},name:"email",value:i})}),Object(j.jsx)("div",{className:Re.a.input+" pt-6 pb-6",children:Object(j.jsx)(l.PasswordInput,{onChange:function(e){return x(e.target.value)},name:"password",value:m})}),Object(j.jsx)(l.Button,{children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(j.jsxs)("div",{className:"pt-10 text text_type_main-default text_color_inactive",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(j.jsx)(d.b,{className:" pl-2",to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},Be=n(56),Le=n.n(Be),We=function(){var e=Object(c.useState)(""),t=Object(J.a)(e,2),n=t[0],r=t[1],a=Object(u.g)(),s=Object(u.h)(),i=function(){var e=Object(oe.a)(ie.a.mark((function e(t){var c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,ue(n);case 3:(c=e.sent).success?a.push({pathname:"/reset-password",state:{from:s.pathname}}):console.log(c.message);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:Le.a.flex,children:[Object(j.jsxs)("form",{className:Le.a.flex,onSubmit:i,children:[Object(j.jsx)("div",{className:"text text_type_main-medium pt-15",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(j.jsx)("div",{className:Le.a.input+" pt-6 pb-6",children:Object(j.jsx)(l.Input,{onChange:function(e){return r(e.target.value)},name:"email",value:n,placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail"})}),Object(j.jsx)(l.Button,{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(j.jsxs)("div",{className:"pt-20 text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(j.jsx)(d.b,{className:" pl-2",to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},Me=n(45),Ue=n.n(Me),Ae=function(){var e,t,n=Object(c.useState)(""),r=Object(J.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)(""),o=Object(J.a)(i,2),b=o[0],p=o[1],m=Object(u.g)(),x=function(){var e=Object(oe.a)(ie.a.mark((function e(t){var n;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,de(a,b);case 3:(n=e.sent).success?m.push("/login"):console.log(n.message);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(null===m||void 0===m||null===(e=m.location)||void 0===e||null===(t=e.state)||void 0===t?void 0:t.from)?Object(j.jsxs)("div",{className:Ue.a.flex,children:[Object(j.jsxs)("form",{className:Ue.a.flex,onSubmit:x,children:[Object(j.jsx)("div",{className:"text text_type_main-medium pt-15",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(j.jsx)("div",{className:Ue.a.input+" pt-6 pb-6",children:Object(j.jsx)(l.PasswordInput,{onChange:function(e){return s(e.target.value)},name:"password",value:a})}),Object(j.jsx)("div",{className:Ue.a.input+" pb-6",children:Object(j.jsx)(l.Input,{onChange:function(e){return p(e.target.value)},name:"email",value:b,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430"})}),Object(j.jsx)(l.Button,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(j.jsxs)("div",{className:"pt-20 text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(j.jsx)(d.b,{className:"pl-2",to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]}):Object(j.jsx)(u.a,{to:"/login"})},Ge=n(100),ze=n.n(Ge),He=function(){return Object(j.jsxs)("div",{className:ze.a.container,children:[Object(j.jsx)("div",{className:"mt-30 text text_type_main-large text_color_inactive",children:"\u041e\u0448\u0438\u0431\u043a\u0430 404: \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(j.jsxs)("div",{className:"mt-10 text text_type_main-large",children:[Object(j.jsx)("span",{className:"text_color_inactive",children:"\u041d\u043e \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 "}),Object(j.jsx)(d.b,{to:"/",children:"\u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"})]})]})},Je=n(27),Qe=n.n(Je),Ye=n(11),qe=n.n(Ye),Ze=function(e){var t=new Date,n=new Date(e),c=n.getHours(),r=n.getMinutes();c<10&&(c="0"+c),r<10&&(r="0"+r),t.setHours(0,0,0,0),n.setHours(0,0,0,0);var a=(+t-+n)/864e5;0===a?a="\u0421\u0435\u0433\u043e\u0434\u043d\u044f":1===a?a="\u0412\u0447\u0435\u0440\u0430":a>1&&(a+=" \u0434\u043d. \u043d\u0430\u0437\u0430\u0434");var s=n.getTimezoneOffset()/60;return a+", "+c+":"+r+" i-GMT"+(s>0?s:"+"+-1*s)},Xe=function(e){var t=e.order,n=e.status,r=Object(u.h)(),a=f((function(e){return e.ingredients})).ingredients,s=Object(c.useState)([]),i=Object(J.a)(s,2),o=i[0],b=i[1],p=Object(c.useState)([]),m=Object(J.a)(p,2),x=m[0],_=m[1],O=Object(c.useState)(0),h=Object(J.a)(O,2),v=h[0],g=h[1],N=Object(c.useState)(0),y=Object(J.a)(N,2),w=y[0],k=y[1],C=t.number;return Object(c.useEffect)((function(){if(a.length){var e,n=0,c=[];null===t||void 0===t||null===(e=t.ingredients)||void 0===e||e.forEach((function(e){var t=a.filter((function(t){return t._id===e}))[0];(null===t||void 0===t?void 0:t.price)&&(c.push(t),n+=t.price)})),k(n),b(c)}}),[a,t.ingredients]),Object(c.useEffect)((function(){var e=[],t=new Set;o.forEach((function(e){return t.add(e)})),t.forEach((function(t){e.push(t.image_mobile)})),_(e),g(e.length)}),[o]),Object(j.jsx)(d.b,{to:{pathname:"".concat(r.pathname,"/").concat(C),state:{background:r}},className:qe.a.link,children:Object(j.jsxs)("section",{className:qe.a.container+" p-6 mr-4 mb-4",children:[Object(j.jsxs)("header",{className:qe.a.header,children:[Object(j.jsx)("p",{className:"text text_type_digits-default",children:"#"+t.number}),Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:Ze(t.createdAt)})]}),Object(j.jsxs)("div",{className:"text text_type_main-medium pb-6 pt-6",children:[t.name,n&&Object(j.jsx)("div",{className:"text text_type_main-default pt-2",style:{color:"done"===t.status?"#00CCCC":"#FFFFFF"},children:"done"===t.status?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u0421\u043e\u0437\u0434\u0430\u043d"})]}),Object(j.jsxs)("footer",{className:qe.a.dflex,children:[Object(j.jsx)("div",{className:qe.a.flex,children:x.map((function(e,t){var n=15*-t;return t<=4?Object(j.jsx)("div",{className:qe.a.image,style:{left:n,zIndex:100-t},children:Object(j.jsx)("img",{className:qe.a.icon,src:e,alt:""})},t):5===t&&Object(j.jsxs)("div",{className:qe.a.image,style:{left:n,zIndex:100-t},children:[Object(j.jsx)("p",{className:qe.a.count+" text text_type_digits-default",children:"+"+(v-6)}),Object(j.jsx)("img",{className:qe.a.plusicon,src:e,alt:""})]},t)}))}),Object(j.jsxs)("div",{className:qe.a.flex,children:[Object(j.jsx)("span",{className:"text text_type_digits-default pr-2",children:w}),Object(j.jsx)(l.CurrencyIcon,{type:"primary"})]})]})]})},C)},Ve=function(){var e,t=_(),n=Object(u.g)(),r=f((function(e){return e.messages})).messages,a=Object(c.useState)([]),s=Object(J.a)(a,2),i=s[0],o=s[1],l=(null===(e=xe("accessToken"))||void 0===e?void 0:e.split(" ")[1])||"",b=function(){var e=Object(oe.a)(ie.a.mark((function e(){var c;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe();case 2:(c=e.sent).success?(t({type:B}),n.replace({pathname:"/login"})):console.log(c.message);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return t({type:L,payload:"wss://norma.nomoreparties.space/orders?token=".concat(l)}),function(){t({type:W})}}),[t,l]),Object(c.useEffect)((function(){var e;(null===(e=r[0])||void 0===e?void 0:e.orders)&&o(r[0].orders)}),[r]),Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:Qe.a.container,children:[Object(j.jsx)("div",{className:Qe.a.flex+" pt-30",children:Object(j.jsxs)("aside",{className:Qe.a.aside+" pl-5 pr-15",children:[Object(j.jsx)("div",{className:Qe.a.link+" text text_type_main-medium text_color_inactive",children:Object(j.jsx)(d.b,{to:"/profile",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(j.jsx)("div",{className:Qe.a.link+" text text_type_main-medium",children:Object(j.jsx)(d.b,{to:"/profile/orders",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(j.jsx)("div",{onClick:b,className:Qe.a.link+" text text_type_main-medium text_color_inactive",children:Object(j.jsx)(d.b,{to:"/login",children:"\u0412\u044b\u0445\u043e\u0434"})}),Object(j.jsx)("div",{className:Qe.a.info+" pt-20 text text_type_main-default text_color_inactive",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})}),Object(j.jsx)("div",{className:Qe.a.orders+" pt-10",children:i.length?i.map((function(e){var t;return(null===e||void 0===e||null===(t=e.ingredients)||void 0===t?void 0:t.length)?Object(j.jsx)(Xe,{order:e,status:"done"},e._id):null})):Object(j.jsx)("p",{className:"text text_type_main-medium pt-4 pr-20",children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u0432\u0430\u0448\u0438 \u0437\u0430\u043a\u0430\u0437\u044b"})})]})})},$e=n(24),Ke=n.n($e),et=function(){var e=_(),t=Object(c.useState)([]),n=Object(J.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(0),i=Object(J.a)(s,2),o=i[0],d=i[1],b=f((function(e){return e.ingredients})).ingredients,p=f((function(e){return e.orderData})).order,m=Object(u.i)().id;return Object(c.useEffect)((function(){e(function(e){return function(t){fetch(C+"/orders/"+e).then((function(e){return z(e)})).then((function(e){t({type:G,order:e.orders[0]})})).catch((function(e){console.log(e.message)}))}}(m))}),[e,m]),Object(c.useEffect)((function(){if(b.length){var e,t,n=0;null===p||void 0===p||null===(e=p.ingredients)||void 0===e||e.forEach((function(e){var t=b.filter((function(t){return t._id===e}))[0];n+=t.price})),d(n);var c=new Set,r=[];null===p||void 0===p||null===(t=p.ingredients)||void 0===t||t.forEach((function(e){return c.add(e)})),c.forEach((function(e){return r.push(b.filter((function(t){return t._id===e}))[0])})),r.forEach((function(e){return e.count=p.ingredients.filter((function(t){return t===e._id})).length})),a(r)}}),[b,p]),Object(j.jsxs)("section",{className:Ke.a.container,children:[Object(j.jsx)("h1",{className:Ke.a.number+" text text_type_digits-default pt-4",children:"#"+p.number}),Object(j.jsx)("p",{className:"text text_type_main-medium pt-10",children:p.name}),Object(j.jsx)("p",{className:"text text_type_main-default pt-2",children:Object(j.jsx)("span",{style:{color:"done"===p.status?"#00CCCC":"#FFFFFF"},children:"done"===p.status?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u0421\u043e\u0437\u0434\u0430\u043d"})}),Object(j.jsx)("p",{className:"text text_type_main-medium pt-15 pb-4",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(j.jsx)("div",{className:Ke.a.details+" pr-2",children:r&&r.map((function(e,t){return Object(j.jsxs)("div",{className:Ke.a.dflex+" mt-4 pb-2",children:[Object(j.jsxs)("div",{className:Ke.a.flex,children:[Object(j.jsx)("div",{className:Ke.a.icon+" mr-4",children:Object(j.jsx)("img",{className:Ke.a.image,src:e.image_mobile,alt:""})}),Object(j.jsx)("div",{className:"text text_type_main-default",children:e.name})]}),Object(j.jsxs)("div",{className:Ke.a.flex+" text text_type_digits-default",children:[Object(j.jsxs)("span",{className:"pr-2",children:[(e.count||0)>1&&e.count+" x ",e.price]}),Object(j.jsx)(l.CurrencyIcon,{type:"primary"})]})]},t)}))}),Object(j.jsxs)("footer",{className:Ke.a.dflex+" mt-10 pr-2 pb-4",children:[Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:Ze(p.createdAt)}),Object(j.jsxs)("div",{className:Ke.a.flex+" text text_type_digits-default",children:[Object(j.jsx)("span",{className:"pr-2",children:o}),Object(j.jsx)(l.CurrencyIcon,{type:"primary"})]})]})]})},tt=function(){var e=_(),t=f((function(e){return e.messages})).messages,n=Object(c.useState)([]),r=Object(J.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)([]),o=Object(J.a)(i,2),l=o[0],u=o[1],d=Object(c.useState)([]),b=Object(J.a)(d,2),p=b[0],m=b[1],x=Object(c.useState)(0),O=Object(J.a)(x,2),h=O[0],v=O[1],g=Object(c.useState)(0),N=Object(J.a)(g,2),y=N[0],w=N[1];Object(c.useEffect)((function(){return e({type:L,payload:"wss://norma.nomoreparties.space/orders/all"}),function(){e({type:W})}}),[e]),Object(c.useEffect)((function(){var e;(null===(e=t[0])||void 0===e?void 0:e.orders)&&(s(t[0].orders),v(t[0].total),w(t[0].totalToday))}),[t]),Object(c.useEffect)((function(){if(a.length){var e=a.filter((function(e){return"created"===e.status})),t=a.filter((function(e){return"done"===e.status}));u(k(e)),m(k(t))}}),[a]);var k=function(e){for(var t=[],n=0;n<e.length;n+=10)t.push(e.slice(n,n+10));return t};return Object(j.jsxs)("div",{className:qe.a.wcontainer,children:[Object(j.jsx)("header",{className:qe.a.header+" pl-4",children:Object(j.jsx)("h1",{className:"text text_type_main-large pt-8 pb-6",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(j.jsxs)("section",{className:qe.a.wflex+" pl-4",children:[Object(j.jsx)("div",{className:qe.a.orders,children:a.length&&a.map((function(e){var t;return(null===e||void 0===e||null===(t=e.ingredients)||void 0===t?void 0:t.length)?Object(j.jsx)(Xe,{order:e,status:!1},e._id):null}))}),Object(j.jsxs)("div",{className:qe.a.data,children:[Object(j.jsxs)("div",{className:qe.a.sflex,children:[Object(j.jsxs)("section",{className:"mr-8",children:[Object(j.jsx)("header",{className:"text text_type_main-medium pb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(j.jsx)("div",{className:qe.a.wrflex,children:p.length&&p[0].length?p.map((function(e,t){return Object(j.jsx)("div",{className:qe.a.cflex+" mr-8 mb-8",children:e.map((function(e){return Object(j.jsx)("span",{className:qe.a.ready+" text text_type_digits-default mb-2",children:e.number},e.number)}))},t)})):Object(j.jsx)("p",{className:"text text_type_main-medium text_color_inactive",children:"\u043d\u0435\u0442"})})]}),Object(j.jsxs)("section",{children:[Object(j.jsx)("header",{className:"text text_type_main-medium pb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(j.jsx)("div",{className:qe.a.wrflex,children:l.length&&l[0].length?l.map((function(e,t){return Object(j.jsx)("div",{className:qe.a.cflex+" mr-8 mb-8",children:e.map((function(e){return Object(j.jsx)("span",{className:"text text_type_digits-default",children:e.number},e.number)}))},t)})):Object(j.jsx)("p",{className:"text text_type_main-medium",children:"-"})})]})]}),Object(j.jsx)("p",{className:"text text_type_main-medium pt-10",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(j.jsx)("p",{className:"text text_type_digits-large",children:h}),Object(j.jsx)("p",{className:"text text_type_main-medium pt-10",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(j.jsx)("p",{className:"text text_type_digits-large",children:y})]})]})]})},nt=function(){return Object(j.jsx)(tt,{})},ct=n(53),rt=["children"],at=function(e){var t=e.children,n=Object(ct.a)(e,rt),c=localStorage.getItem("refreshToken");return Object(j.jsx)(u.b,Object(ke.a)(Object(ke.a)({},n),{},{render:function(e){var n=e.location;return c?t:Object(j.jsx)(u.a,{to:{pathname:"/login",state:{from:n}}})}}))},st=["children"],it=function(e){var t=e.children,n=Object(ct.a)(e,st),c=localStorage.getItem("refreshToken");return Object(j.jsx)(u.b,Object(ke.a)(Object(ke.a)({},n),{},{render:function(e){var n=e.location;return c?Object(j.jsx)(u.a,{to:{pathname:"/profile",state:{from:n}}}):t}}))},ot=function(){var e=Object(u.h)(),t=Object(u.g)(),n=Object(x.b)(),r=("PUSH"===t.action||"REPLACE"===t.action)&&e.state&&e.state.background,a=localStorage.getItem("refreshToken");return Object(c.useEffect)((function(){n(H()),a&&n({type:P})}),[n,a]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(b,{}),Object(j.jsxs)(u.d,{location:r||e,children:[Object(j.jsx)(u.b,{path:"/",exact:!0,children:Object(j.jsx)(we,{})}),Object(j.jsx)(it,{path:"/register",exact:!0,children:Object(j.jsx)(Pe,{})}),Object(j.jsx)(it,{path:"/login",exact:!0,children:Object(j.jsx)(De,{})}),Object(j.jsx)(u.b,{path:"/ingredients/:id",exact:!0,children:Object(j.jsx)(O,{})}),Object(j.jsx)(it,{path:"/reset-password",exact:!0,children:Object(j.jsx)(Ae,{})}),Object(j.jsx)(at,{path:"/profile",exact:!0,children:Object(j.jsx)(Se,{})}),Object(j.jsx)(at,{path:"/profile/orders",exact:!0,children:Object(j.jsx)(Ve,{})}),Object(j.jsx)(at,{path:"/profile/orders/:id",exact:!0,children:Object(j.jsx)(et,{})}),Object(j.jsx)(u.b,{path:"/feed",exact:!0,children:Object(j.jsx)(nt,{})}),Object(j.jsx)(u.b,{path:"/feed/:id",exact:!0,children:Object(j.jsx)(et,{})}),Object(j.jsx)(it,{path:"/forgot-password",exact:!0,children:Object(j.jsx)(We,{})}),Object(j.jsx)(u.b,{children:Object(j.jsx)(He,{})})]}),r&&Object(j.jsx)(u.b,{path:"/ingredients/:id",children:Object(j.jsx)(k,{onClose:function(){return t.goBack()},children:Object(j.jsx)(O,{})})}),r&&Object(j.jsx)(u.b,{path:"/feed/:id",children:Object(j.jsx)(k,{onClose:function(){return t.goBack()},children:Object(j.jsx)(et,{})})}),r&&Object(j.jsx)(u.b,{path:"/profile/orders/:id",children:Object(j.jsx)(k,{onClose:function(){return t.goBack()},children:Object(j.jsx)(et,{})})})]})},lt=(n(185),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,194)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))}),ut=n(101),dt=n(25),jt={ingredients:[],element:{_id:"",name:"",type:"",proteins:0,fat:0,carbohydrates:0,calories:0,price:0,image:"",image_mobile:"",image_large:"",__v:0}},bt={number:"",elements:[]},pt={signIn:!1},mt={wsConnected:!1,messages:[],error:""},xt={order:[]},ft=Object(dt.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(ke.a)(Object(ke.a)({},e),{},{signIn:!0});case B:return Object(ke.a)(Object(ke.a)({},e),{},{signIn:!1});default:return e}},ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(ke.a)(Object(ke.a)({},e),{},{ingredients:t.ingredients});case S:return Object(ke.a)(Object(ke.a)({},e),{},{element:t.element});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(ke.a)(Object(ke.a)({},e),{},{number:t.number});case I:return"bun"===t.element.type?Object(ke.a)(Object(ke.a)({},e),{},{elements:[].concat(Object(K.a)(e.elements.filter((function(e){return"bun"!==e.type}))),[Object(ke.a)({},t.element)])}):Object(ke.a)(Object(ke.a)({},e),{},{elements:[].concat(Object(K.a)(e.elements),[Object(ke.a)({},t.element)])});case D:return Object(ke.a)(Object(ke.a)({},e),{},{elements:e.elements.filter((function(n){return n!==e.elements.find((function(e){return e._id===t.id}))}))});case F:return Object(ke.a)(Object(ke.a)({},e),{},{number:"",elements:[]});case R:return Object(ke.a)(Object(ke.a)({},e),{},{elements:t.cards});default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(ke.a)(Object(ke.a)({},e),{},{error:"",wsConnected:!0});case U:return Object(ke.a)(Object(ke.a)({},e),{},{error:t.payload,wsConnected:!1});case W:return{messages:[],error:"",wsConnected:!1};case A:return Object(ke.a)(Object(ke.a)({},e),{},{error:"",messages:[t.payload]});default:return e}},orderData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return Object(ke.a)(Object(ke.a)({},e),{},{order:t.order});default:return e}}}),_t=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||dt.c)(Object(dt.a)(ut.a),Object(dt.a)((function(e){var t=null;return function(n){return function(c){var r=e.dispatch,a=c.type,s=c.payload;if(a===L&&(t=new WebSocket(s)),t&&(t.onopen=function(e){r({type:M,payload:e})},t.onerror=function(e){r({type:U,payload:e})},t.onmessage=function(e){var t=e.data,n=JSON.parse(t);r({type:A,payload:n})},t.onclose=function(e){r({type:W,payload:e})},"WS_SEND_MESSAGE"===a)){var i=s;t.send(JSON.stringify(i))}n(c)}}}))),Ot=Object(dt.d)(ft,_t);s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(x.a,{store:Ot,children:Object(j.jsx)(d.a,{children:Object(j.jsx)(ot,{})})})}),document.getElementById("root")),lt()},19:function(e,t,n){e.exports={container:"burger-constructor_container__3FbLP",locked:"burger-constructor_locked__2gLCG",ingredients:"burger-constructor_ingredients__10Pqa",element:"burger-constructor_element__28eg2",list:"burger-constructor_list__1FLuC",flex:"burger-constructor_flex__BQHva",order:"burger-constructor_order__JZZ__",space:"burger-constructor_space__x4-I8 burger-constructor_flex__BQHva"}},22:function(e,t,n){e.exports={container:"burger-ingredients_container__1-CBt",ingredients:"burger-ingredients_ingredients__ADbYo",flex:"burger-ingredients_flex__1hg_n",element:"burger-ingredients_element__vqnvU",list:"burger-ingredients_list__3pJi9",price:"burger-ingredients_price__3FBRU",name:"burger-ingredients_name__1CXlr"}},23:function(e,t,n){e.exports={container:"profile_container__1bGJf",flex:"profile_flex__2jBdw",aside:"profile_aside__36Spt",link:"profile_link__tFkwt",inputs:"profile_inputs__2_HGU",info:"profile_info__17mQs"}},24:function(e,t,n){e.exports={container:"order_container__2dnWZ",flex:"order_flex__2CfrR",dflex:"order_dflex__1CtUa order_flex__2CfrR",details:"order_details__1oW18",icon:"order_icon__3DsA4",image:"order_image__d0JDF",number:"order_number__3UnnX"}},26:function(e,t,n){e.exports={container:"ingredient-details_container__13vWF",flex:"ingredient-details_flex__1io2A",structure:"ingredient-details_structure__3DrCb"}},27:function(e,t,n){e.exports={container:"orders_container__11LIU",flex:"orders_flex__1bHtk",aside:"orders_aside__Nm8kP",link:"orders_link__rn8_o",inputs:"orders_inputs__3q5bg",info:"orders_info__2fMzT",orders:"orders_orders__Iik6l"}},29:function(e,t,n){e.exports={header:"app-header_header__2kNdI",container:"app-header_container__2dnkR",logomenu:"app-header_logomenu__1YgMM",menu:"app-header_menu__3iOB0",btn:"app-header_btn__3HD0Z"}},35:function(e,t,n){e.exports={flex:"register_flex__38esQ",input:"register_input__22xQk"}},44:function(e,t,n){e.exports={flex:"login_flex__8RBz9",input:"login_input__YgEfy"}},45:function(e,t,n){e.exports={flex:"reset-password_flex__307ZE",input:"reset-password_input__6tSaD"}},54:function(e,t,n){e.exports={container:"modal_container__T_itw",btn:"modal_btn__8Itn6",overlay:"modal_overlay__3FH2d",wrap:"modal_wrap__2jMq4"}},55:function(e,t,n){e.exports={container:"order-details_container__mx1j3",flex:"order-details_flex__gkQ4d",loading:"order-details_loading__2XyoQ"}},56:function(e,t,n){e.exports={flex:"forgot-password_flex__1bf3Y",input:"forgot-password_input__rs3mc"}},96:function(e,t,n){e.exports={container:"modal-overlay_container__3yNZd"}},97:function(e,t,n){e.exports={container:"main_container__csY2k"}}},[[186,1,2]]]);
//# sourceMappingURL=main.9f1a1342.chunk.js.map