{"version":3,"sources":["components/pages/error-404/index.module.css","components/feed-info/feed.module.css","components/app-header/app-header.tsx","services/hooks.ts","components/ingredient-details/ingredient-details.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","services/actions/index.ts","components/burger-ingredients/burger-ingredients-element.tsx","components/burger-ingredients/burger-ingredients.tsx","components/burger-constructor/burger-constructor-element.tsx","services/auth.ts","components/burger-constructor/burger-constructor.tsx","components/order-details/order-details.tsx","components/pages/main/index.tsx","components/pages/profile/index.tsx","components/pages/login/index.tsx","components/pages/register/index.tsx","components/pages/forgot-password/index.tsx","components/pages/reset-password/index.tsx","components/pages/error-404/index.tsx","services/utils.ts","components/feed-info/feed-element.tsx","components/pages/orders/index.tsx","components/pages/order/index.tsx","components/feed-info/feed-info.tsx","components/pages/feed/index.tsx","components/protected-route/index.tsx","components/protected-route/login-protected.tsx","components/app/app.tsx","reportWebVitals.ts","services/reducers/ingredient-details.ts","services/reducers/order-details.ts","services/reducers/auth.ts","services/reducers/ws.ts","services/reducers/order-data.ts","services/reducers/index.ts","services/store.ts","services/middleware.ts","index.tsx","components/burger-constructor/burger-constructor.module.css","components/burger-ingredients/burger-ingredients.module.css","components/pages/profile/index.module.css","components/pages/order/index.module.css","components/ingredient-details/ingredient-details.module.css","components/pages/orders/index.module.css","components/app-header/app-header.module.css","components/pages/register/index.module.css","components/pages/login/index.module.css","components/pages/reset-password/index.module.css","components/modal/modal.module.css","components/order-details/order-details.module.css","components/pages/forgot-password/index.module.css","components/modal-overlay/modal-overlay.module.css","components/pages/main/index.module.css"],"names":["module","exports","AppHeader","mainMatch","useRouteMatch","ordersMatch","profileMatch","ordersHistoryMatch","current","match","isExact","className","styles","header","container","logomenu","menu","to","btn","type","useSelector","selectorHook","useDispatch","dispatchHook","IngredientDetails","id","useParams","data","store","ingredients","element","find","e","_id","flex","src","image_large","alt","name","structure","calories","proteins","fat","carbohydrates","ModalOverlay","onClose","onClick","modalRoot","document","getElementById","Modal","children","useEffect","handler","code","window","addEventListener","removeEventListener","ReactDOM","createPortal","wrap","URL","SET_INGREDIENTS","SET_ELEMENT","SET_ORDER_NUMBER","ADD_ELEMENT","DELETE_ELEMENT","DELETE_ORDER","MOVE_ELEMENT","SIGN_IN","SIGN_OUT","WS_CONNECTION_START","WS_CONNECTION_CLOSED","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_GET_MESSAGE","GET_ORDER","checkResponse","res","ok","json","Promise","reject","Error","getData","dispatch","fetch","then","catch","console","log","message","BurgerIngredientsElement","openWindow","elements","order","count","filter","length","useDrag","item","collect","monitor","isDrag","isDragging","dragRef","ref","size","image","width","price","BurgerIngredients","useState","setCurrent","querySelector","scrollBurgerIngredients","height","scrollTop","tabClick","tab","bun","sauce","main","value","active","list","map","BurgerConstructorElement","index","moveCard","useRef","useDrop","accept","handlerId","getHandlerId","hover","dragIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","clientOffset","getClientOffset","hoverClientY","y","drop","drag","text","thumbnail","handleClose","request","url","body","token","a","requestHeaders","Authorization","params","method","headers","accessToken","getCookie","JSON","stringify","response","result","success","refreshToken","resetPassword","email","finalResetPassword","password","registerUser","signIn","setCookie","localStorage","setItem","signOut","getItem","deleteCookie","removeItem","sussess","matches","cookie","RegExp","replace","decodeURIComponent","undefined","props","exp","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","BurgerConstructor","cards","setCards","history","useHistory","formOrder","orderElements","number","dropTarget","dropTargetInOrder","useCallback","dragCard","update","$splice","locked","isLocked","space","i","deleteElement","reduce","sum","push","OrderDetails","loading","Main","isOrderDetailsOpen","setOrderDetailsOpen","DndProvider","backend","HTML5Backend","background","location","Profile","setName","setEmail","setPassword","state","auth","edit","setEdit","user","setData","changeProfile","preventDefault","cancelChanges","handleSignOut","pathname","fetchData","aside","link","info","inputs","onSubmit","placeholder","icon","onChange","target","Login","handleLogin","from","input","Register","handleRegister","ForgotPassword","useLocation","handlePassword","ResetPassword","setCode","Error404","getDate","date","today","theDate","hours","getHours","minutes","getMinutes","setHours","day","time","getTimezoneOffset","FeedElement","status","setElements","icons","setIcons","setCount","setPrice","num","total","elementsArr","forEach","elem","el","images","elementsSet","Set","add","image_mobile","createdAt","style","color","dflex","param","left","zIndex","plusicon","Orders","messages","orders","setOrders","split","payload","Order","orderData","getOrderData","details","FeedInfo","inOrder","setInOrder","ready","setReady","setTotal","totalToday","setTotalToday","sliceByTen","arr","newArr","slice","wcontainer","wflex","sflex","wrflex","cflex","Feed","ProtectedRoute","rest","render","LoginProtectedRoute","App","action","path","exact","goBack","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","__v","wsConnected","error","rootReducer","combineReducers","enhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","socket","next","WebSocket","onopen","event","onerror","onmessage","parsedData","parse","onclose","send","createStore","StrictMode"],"mappings":"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","file":"static/js/main.9f1a1342.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"error-404_container__2jkft\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"feed_container__3PKn1\",\"wcontainer\":\"feed_wcontainer__14WYw\",\"header\":\"feed_header__3RFJI\",\"flex\":\"feed_flex__U69bn\",\"dflex\":\"feed_dflex__bGBxY feed_flex__U69bn\",\"sflex\":\"feed_sflex__1e3KL\",\"wrflex\":\"feed_wrflex__34zDN\",\"wflex\":\"feed_wflex__19mj5 feed_wrflex__34zDN\",\"cflex\":\"feed_cflex__1oA6s\",\"image\":\"feed_image__2QfrB\",\"icon\":\"feed_icon__2WwPR\",\"plusicon\":\"feed_plusicon__2FGVF feed_icon__2WwPR\",\"count\":\"feed_count__3FNFH\",\"orders\":\"feed_orders__45odD\",\"data\":\"feed_data__1nIaF\",\"ready\":\"feed_ready__3ToET\"};","import React, { FC } from \"react\";\r\nimport styles from \"./app-header.module.css\";\r\nimport { BurgerIcon, ListIcon, Logo, ProfileIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Link, match, useRouteMatch } from \"react-router-dom\";\r\n\r\nconst AppHeader: FC = () => {\r\n  const mainMatch = useRouteMatch(\"/\");\r\n  const ordersMatch = useRouteMatch(\"/feed\");\r\n  const profileMatch = useRouteMatch(\"/profile\");\r\n  const ordersHistoryMatch = useRouteMatch(\"/profile/orders\");\r\n  const current = (match: match<{}> | null) => (match ? match.isExact : false);\r\n  return (\r\n    <header className={styles.header}>\r\n      <div className={styles.container}>\r\n        <div className={styles.logomenu}>\r\n          <nav className={styles.menu}>\r\n            <Link to=\"/\" className={styles.btn + \" p-5 mt-4 mb-4 mr-2\"}>\r\n              <BurgerIcon type={current(mainMatch) ? \"primary\" : \"secondary\"} />\r\n              <p className={`pl-2 text text_type_main-default  + ${current(mainMatch) ? \"\" : \"text_color_inactive\"}`}>\r\n                Конструктор\r\n              </p>\r\n            </Link>\r\n            <Link to=\"/feed\" className={styles.btn + \" p-5  mt-4 mb-4\"}>\r\n              <ListIcon type={current(ordersMatch) ? \"primary\" : \"secondary\"} />\r\n              <p className={`pl-2 text text_type_main-default  + ${current(ordersMatch) ? \"\" : \"text_color_inactive\"}`}>\r\n                Лента заказов\r\n              </p>\r\n            </Link>\r\n          </nav>\r\n          <Link to=\"/\">\r\n            <Logo />\r\n          </Link>\r\n        </div>\r\n        <Link to=\"/profile\" className={styles.btn + \" p-5 mt-4 mb-4\"}>\r\n          <ProfileIcon type={current(profileMatch) || current(ordersHistoryMatch) ? \"primary\" : \"secondary\"} />\r\n          <p\r\n            className={`pl-2 text text_type_main-default  + ${\r\n              current(profileMatch) || current(ordersHistoryMatch) ? \"\" : \"text_color_inactive\"\r\n            }`}\r\n          >\r\n            Личный кабинет\r\n          </p>\r\n        </Link>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default AppHeader;\r\n","import { TypedUseSelectorHook, useDispatch as dispatchHook, useSelector as selectorHook } from \"react-redux\";\r\n\r\nimport { AppDispatch, AppThunk, RootState } from \"./types\";\r\n\r\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;\r\nexport const useDispatch = () => dispatchHook<AppDispatch | AppThunk>();\r\n","import React, { FC } from \"react\";\r\nimport styles from \"./ingredient-details.module.css\";\r\nimport { useSelector } from \"../../services/hooks\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { TIngredient } from \"../../services/actions\";\r\n\r\nconst IngredientDetails: FC = () => {\r\n  const { id } = useParams() as any;\r\n  let data = useSelector((store) => store.ingredients.element);\r\n  const dataId = useSelector((store) => store.ingredients.ingredients).find((e: TIngredient) => e._id === id);\r\n  data = dataId || data;\r\n  return (\r\n    <div className={styles.container + \" pt-10 pr-10 pb-10 pl-10\"}>\r\n      <p className={styles.flex + \" text text_type_main-large mt-3 mb-3\"}>Детали ингредиента</p>\r\n      <div className={styles.flex}>\r\n        <img src={data.image_large} alt={data.name} />\r\n        <p className=\"text text_type_main-medium mt-4 mb-8\">{data.name}</p>\r\n        <ul className={styles.structure + \" pb-5\"}>\r\n          <li className={styles.flex}>\r\n            <p className=\"text text_type_main-default text_color_inactive mr-5\">Калории, ккал</p>\r\n            <p className=\"text text_type_digits-default text_color_inactive\">{data.calories}</p>\r\n          </li>\r\n          <li className={styles.flex}>\r\n            <p className=\"text text_type_main-default text_color_inactive mr-5\">Белки, г</p>\r\n            <p className=\"text text_type_digits-default text_color_inactive\">{data.proteins}</p>\r\n          </li>\r\n          <li className={styles.flex}>\r\n            <p className=\"text text_type_main-default text_color_inactive mr-5\">Жиры, г</p>\r\n            <p className=\"text text_type_digits-default text_color_inactive\">{data.fat}</p>\r\n          </li>\r\n          <li className={styles.flex}>\r\n            <p className=\"text text_type_main-default text_color_inactive\">Углеводы, г</p>\r\n            <p className=\"text text_type_digits-default text_color_inactive\">{data.carbohydrates}</p>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IngredientDetails;\r\n","import React, { FC } from \"react\";\r\nimport styles from \"./modal-overlay.module.css\";\r\nimport {} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\ntype TProps = {\r\n  onClose: () => void;\r\n};\r\n\r\nconst ModalOverlay: FC<TProps> = ({ onClose }) => {\r\n  return <div className={styles.container} onClick={onClose}></div>;\r\n};\r\n\r\nexport default ModalOverlay;\r\n","import React, { FC, useEffect } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport styles from \"./modal.module.css\";\r\nimport { CloseIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport ModalOverlay from \"../modal-overlay/modal-overlay\";\r\n\r\nconst modalRoot = document.getElementById(\"modal\");\r\n\r\ntype TProps = {\r\n  children: React.ReactNode;\r\n  onClose: () => void;\r\n};\r\n\r\nconst Modal: FC<TProps> = ({ children, onClose }) => {\r\n  useEffect(() => {\r\n    const handler = (e: KeyboardEvent) => (e.code === \"Escape\" ? onClose() : null);\r\n    window.addEventListener(\"keydown\", handler);\r\n    return () => {\r\n      window.removeEventListener(\"keydown\", handler);\r\n    };\r\n  }, [onClose]);\r\n\r\n  return ReactDOM.createPortal(\r\n    <>\r\n      <div className={styles.wrap}>\r\n        <div className={styles.container}>\r\n          {children}\r\n          <div className={styles.btn + \" mt-5 pt-10 pr-10\"} onClick={onClose}>\r\n            <CloseIcon type=\"primary\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <ModalOverlay onClose={onClose} />\r\n    </>,\r\n    modalRoot as HTMLDivElement\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import { AppThunk } from \"../types\";\r\n\r\nexport const URL = \"https://norma.nomoreparties.space/api\" as const;\r\nexport const SET_INGREDIENTS = \"SET_INGREDIENTS\" as const;\r\nexport const SET_ELEMENT = \"SET_ELEMENT\" as const;\r\nexport const SET_ORDER_NUMBER = \"SET_ORDER_NUMBER\" as const;\r\nexport const ADD_ELEMENT = \"ADD_ELEMENT\" as const;\r\nexport const DELETE_ELEMENT = \"DELETE_ELEMENT\" as const;\r\nexport const DELETE_ORDER = \"DELETE_ORDER\" as const;\r\nexport const MOVE_ELEMENT = \"MOVE_ELEMENT\" as const;\r\nexport const SIGN_IN = \"SIGN_IN\" as const;\r\nexport const SIGN_OUT = \"SIGN_OUT\" as const;\r\nexport const WS_CONNECTION_START = \"WS_CONNECTION_START\" as const;\r\nexport const WS_CONNECTION_CLOSED = \"WS_CONNECTION_CLOSED\" as const;\r\nexport const WS_CONNECTION_SUCCESS = \"WS_CONNECTION_SUCCESS\" as const;\r\nexport const WS_CONNECTION_ERROR = \"WS_CONNECTION_ERROR\" as const;\r\nexport const WS_GET_MESSAGE = \"WS_GET_MESSAGE\" as const;\r\nexport const WS_SEND_MESSAGE = \"WS_SEND_MESSAGE\" as const;\r\nexport const GET_ORDER = \"GET_ORDER\" as const;\r\n\r\nexport type TIngredient = {\r\n  _id: string;\r\n  name: string;\r\n  type: string;\r\n  proteins: number;\r\n  fat: number;\r\n  carbohydrates: number;\r\n  calories: number;\r\n  price: number;\r\n  image: string;\r\n  image_mobile: string;\r\n  image_large: string;\r\n  __v: number;\r\n  count?: number;\r\n};\r\n\r\nexport type TMessage = {\r\n  success: boolean;\r\n  orders: [\r\n    {\r\n      ingredients: string[];\r\n      _id: string;\r\n      name: string;\r\n      status: string;\r\n      number: number;\r\n      createdAt: Date;\r\n      updatedAt: Date;\r\n      price: number;\r\n      __v: number;\r\n    }\r\n  ];\r\n  total: number;\r\n  totalToday: number;\r\n};\r\n\r\nexport type TOrder = {\r\n  ingredients: Array<string>;\r\n  _id: string;\r\n  status: string;\r\n  number: number;\r\n  price: number;\r\n  createdAt: Date;\r\n  updatedAt: Date;\r\n  name: string;\r\n  owner?: {\r\n    createdAt: Date;\r\n    updatedAt: Date;\r\n    email: string;\r\n    name: string;\r\n  };\r\n  __v: number;\r\n};\r\n\r\nexport type TSetIngredientsAction = {\r\n  type: typeof SET_INGREDIENTS;\r\n  ingredients: TIngredient[];\r\n};\r\n\r\nexport type TSetElementAction = {\r\n  type: typeof SET_ELEMENT;\r\n  element: TIngredient;\r\n};\r\n\r\nexport type TIngredientDetailsActions = TSetIngredientsAction | TSetElementAction;\r\n\r\nexport type TSetOrderNumberAction = {\r\n  type: typeof SET_ORDER_NUMBER;\r\n  number: string;\r\n};\r\n\r\nexport type TAddElementAction = {\r\n  type: typeof ADD_ELEMENT;\r\n  element: TIngredient;\r\n};\r\n\r\nexport type TDeleteElementAction = {\r\n  type: typeof DELETE_ELEMENT;\r\n  id: string;\r\n};\r\n\r\nexport type TDeleteOrderAction = {\r\n  type: typeof DELETE_ORDER;\r\n};\r\n\r\nexport type TMoveElementAction = {\r\n  type: typeof MOVE_ELEMENT;\r\n  cards: TIngredient[];\r\n};\r\n\r\nexport type TOrderDetailsActions =\r\n  | TSetOrderNumberAction\r\n  | TAddElementAction\r\n  | TDeleteElementAction\r\n  | TDeleteOrderAction\r\n  | TMoveElementAction;\r\n\r\nexport type TSignInAction = {\r\n  type: typeof SIGN_IN;\r\n};\r\n\r\nexport type TSignOutAction = {\r\n  type: typeof SIGN_OUT;\r\n};\r\n\r\nexport type TAuthActions = TSignInAction | TSignOutAction;\r\n\r\nexport type TConnectionStartAction = {\r\n  type: typeof WS_CONNECTION_START;\r\n};\r\nexport type TConnectionSuccessAction = {\r\n  type: typeof WS_CONNECTION_SUCCESS;\r\n};\r\nexport type TConnectionErrorAction = {\r\n  type: typeof WS_CONNECTION_ERROR;\r\n  payload: WebSocketEventMap | string;\r\n};\r\nexport type TConnectionClosedAction = {\r\n  type: typeof WS_CONNECTION_CLOSED;\r\n};\r\nexport type TGetMessageAction = {\r\n  type: typeof WS_GET_MESSAGE;\r\n  payload: TMessage[];\r\n};\r\nexport type TSendMessageAction = {\r\n  type: typeof WS_SEND_MESSAGE;\r\n};\r\n\r\nexport type TConnectionActions =\r\n  | TConnectionStartAction\r\n  | TConnectionSuccessAction\r\n  | TConnectionErrorAction\r\n  | TConnectionClosedAction\r\n  | TGetMessageAction\r\n  | TSendMessageAction;\r\n\r\nexport type TGetOrderAction = {\r\n  type: typeof GET_ORDER;\r\n  order: TOrder;\r\n};\r\n\r\nconst checkResponse = (res: Response) => {\r\n  if (res.ok) {\r\n    return res.json();\r\n  } else return Promise.reject(new Error(\"Ошибка\"));\r\n};\r\n\r\nexport const getData: AppThunk = () => (dispatch) => {\r\n  fetch(URL + \"/ingredients\")\r\n    .then((res) => checkResponse(res))\r\n    .then((res) =>\r\n      dispatch({\r\n        type: SET_INGREDIENTS,\r\n        ingredients: res.data,\r\n      })\r\n    )\r\n    .catch((e) => console.log(e.message));\r\n};\r\n\r\nexport const getOrderDetails: AppThunk = (data: Array<TIngredient>, token: string) => (dispatch) => {\r\n  fetch(URL + \"/orders\", {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\", Authorization: token },\r\n    body: JSON.stringify({\r\n      ingredients: data.map((e: TIngredient) => e._id),\r\n    }),\r\n  })\r\n    .then((res) => checkResponse(res))\r\n    .then((res) =>\r\n      dispatch({\r\n        type: SET_ORDER_NUMBER,\r\n        number: res.order.number,\r\n      })\r\n    )\r\n    .catch((e) => console.log(e.message));\r\n};\r\n\r\nexport const getOrderData: AppThunk = (id: string) => (dispatch) => {\r\n  fetch(URL + \"/orders/\" + id)\r\n    .then((res) => checkResponse(res))\r\n    .then((res) => {\r\n      dispatch({\r\n        type: GET_ORDER,\r\n        order: res.orders[0],\r\n      });\r\n    })\r\n    .catch((e) => {\r\n      console.log(e.message);\r\n    });\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./burger-ingredients.module.css\";\r\nimport { Counter, CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useSelector } from \"../../services/hooks\";\r\nimport { useDrag } from \"react-dnd\";\r\nimport { TIngredient } from \"../../services/actions\";\r\n\r\ntype TProps = {\r\n  e: TIngredient;\r\n  openWindow: (el: TIngredient) => void;\r\n};\r\n\r\nexport const BurgerIngredientsElement = ({ e, openWindow }: TProps) => {\r\n  const elements = useSelector((store) => store.order.elements);\r\n\r\n  const count = (e: TIngredient) => {\r\n    return e.type === \"bun\"\r\n      ? elements.filter((element: TIngredient) => element._id === e._id).length * 2\r\n      : elements.filter((element: TIngredient) => element._id === e._id).length;\r\n  };\r\n\r\n  const [{ isDrag }, dragRef] = useDrag({\r\n    type: \"e\",\r\n    item: e,\r\n    collect: (monitor) => ({\r\n      isDrag: monitor.isDragging(),\r\n    }),\r\n  });\r\n\r\n  return (\r\n    <>\r\n      {!isDrag && (\r\n        <li ref={dragRef} className={styles.element + \" ml-4 mr-2\"} onClick={() => openWindow(e)}>\r\n          {count(e) > 0 && <Counter count={count(e)} size=\"default\" />}\r\n          <img src={e.image} alt={e.name} className=\"pl-4 pr-4\" width=\"240\" />\r\n          <div className={styles.price + \" mt-1 mb-1\"}>\r\n            <p className=\"pr-1 text text_type_digits-default\">{e.price}</p>\r\n            <CurrencyIcon type=\"primary\" />\r\n          </div>\r\n          <p className={styles.name + \" text text_type_main-small\"}>{e.name}</p>\r\n        </li>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import React, { useEffect, useState, FC } from \"react\";\r\nimport styles from \"./burger-ingredients.module.css\";\r\nimport { Tab } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useSelector } from \"../../services/hooks\";\r\nimport { BurgerIngredientsElement } from \"./burger-ingredients-element\";\r\nimport { TIngredient } from \"../../services/actions\";\r\n\r\ntype TProps = {\r\n  openWindow: (el: TIngredient) => void;\r\n};\r\n\r\nconst BurgerIngredients: FC<TProps> = ({ openWindow }) => {\r\n  const [current, setCurrent] = useState<string>(\"bun\");\r\n  const { ingredients } = useSelector((store) => store.ingredients);\r\n\r\n  useEffect(() => {\r\n    const container = document.querySelector(\"[class^='burger-ingredients_ingredients']\");\r\n    function scrollBurgerIngredients() {\r\n      if (container) {\r\n        const height = container?.scrollTop;\r\n        if (height >= 0 && height < 294) {\r\n          setCurrent(\"bun\");\r\n        } else if (height >= 294 && height < 788) {\r\n          setCurrent(\"sauce\");\r\n        } else {\r\n          setCurrent(\"main\");\r\n        }\r\n      }\r\n    }\r\n    container?.addEventListener(\"scroll\", scrollBurgerIngredients);\r\n    return () => {\r\n      container?.removeEventListener(\"scroll\", scrollBurgerIngredients);\r\n    };\r\n  }, []);\r\n\r\n  const tabClick = (tab: string) => {\r\n    setCurrent(tab);\r\n    const container = document.querySelector(\"[class^='burger-ingredients_ingredients']\");\r\n    const heights: any = { bun: 0, sauce: 295, main: 788 };\r\n    if (container) {\r\n      container.scrollTop = heights[`${tab}`];\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className={styles.container}>\r\n      <p className=\"mt-10 mb-5 text text_type_main-large\">Соберите бургер</p>\r\n      <nav className={styles.flex}>\r\n        <Tab value=\"bun\" active={current === \"bun\"} onClick={() => tabClick(\"bun\")}>\r\n          Булки\r\n        </Tab>\r\n        <Tab value=\"sauce\" active={current === \"sauce\"} onClick={() => tabClick(\"sauce\")}>\r\n          Соусы\r\n        </Tab>\r\n        <Tab value=\"main\" active={current === \"main\"} onClick={() => tabClick(\"main\")}>\r\n          Начинки\r\n        </Tab>\r\n      </nav>\r\n      <div className={styles.ingredients}>\r\n        <p className=\"mt-10 mb-6 text text_type_main-medium\">Булки</p>\r\n        <ul className={styles.list}>\r\n          {ingredients.map(\r\n            (e: TIngredient) =>\r\n              e.type === \"bun\" && <BurgerIngredientsElement openWindow={openWindow} e={e} key={e._id} />\r\n          )}\r\n        </ul>\r\n        <p className=\"mt-10 mb-6 text text_type_main-medium\">Соусы</p>\r\n        <ul className={styles.list}>\r\n          {ingredients.map(\r\n            (e: TIngredient) =>\r\n              e.type === \"sauce\" && <BurgerIngredientsElement openWindow={openWindow} e={e} key={e._id} />\r\n          )}\r\n        </ul>\r\n        <p className=\"mt-10 mb-6 text text_type_main-medium\">Начинка</p>\r\n        <ul className={styles.list}>\r\n          {ingredients.map(\r\n            (e: TIngredient) =>\r\n              e.type === \"main\" && <BurgerIngredientsElement openWindow={openWindow} e={e} key={e._id} />\r\n          )}\r\n        </ul>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default BurgerIngredients;\r\n","import React, { useRef, FC } from \"react\";\r\nimport styles from \"../burger-constructor/burger-constructor.module.css\";\r\nimport { ConstructorElement, DragIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useDrag, useDrop } from \"react-dnd\";\r\nimport { TIngredient } from \"../../services/actions\";\r\n\r\ntype TProps = {\r\n  e: TIngredient;\r\n  onClose: () => void;\r\n  id: string;\r\n  index: number;\r\n  moveCard: (dragIndex: number, hoverIndex: number) => void;\r\n};\r\n\r\nexport const BurgerConstructorElement: FC<TProps> = ({ e, onClose, id, index, moveCard }) => {\r\n  const ref = useRef<HTMLLIElement>(null);\r\n  const [{ handlerId }, drop] = useDrop({\r\n    accept: \"inOrder\",\r\n    collect(monitor) {\r\n      return {\r\n        handlerId: monitor.getHandlerId(),\r\n      };\r\n    },\r\n    hover(item: { index: number }, monitor) {\r\n      if (!ref.current) {\r\n        return;\r\n      }\r\n      const dragIndex = item.index;\r\n      const hoverIndex = index;\r\n      if (dragIndex === hoverIndex) {\r\n        return;\r\n      }\r\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\r\n      const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n      const clientOffset = monitor.getClientOffset();\r\n      if (!clientOffset) return;\r\n      const hoverClientY = clientOffset.y - hoverBoundingRect.top;\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return;\r\n      }\r\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n        return;\r\n      }\r\n      moveCard(dragIndex, hoverIndex);\r\n      item.index = hoverIndex;\r\n    },\r\n  });\r\n  const [{ isDrag }, drag] = useDrag({\r\n    type: \"inOrder\",\r\n    item: () => {\r\n      return { id, index };\r\n    },\r\n    collect: (monitor) => ({\r\n      isDrag: monitor.isDragging(),\r\n    }),\r\n  });\r\n  drag(drop(ref));\r\n  return (\r\n    <>\r\n      {!isDrag && (\r\n        <li ref={ref} className={styles.element + \" mb-4 mr-2 ml-4\"} data-handler-id={handlerId}>\r\n          <DragIcon type=\"primary\" />\r\n          <ConstructorElement text={e.name} price={e.price} thumbnail={e.image} handleClose={onClose} />\r\n        </li>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import { URL } from \"../services/actions\";\r\n\r\nexport const request = async (\r\n  url: string,\r\n  body: { email?: string; password?: string; token?: string | null; name?: string } | null,\r\n  type: string,\r\n  token?: string\r\n) => {\r\n  try {\r\n    const requestHeaders = { \"Content-Type\": \"application/json\", Authorization: \"\" };\r\n    const params =\r\n      type === \"GET\"\r\n        ? {\r\n            method: type,\r\n            headers: requestHeaders,\r\n          }\r\n        : {\r\n            method: type,\r\n            headers: requestHeaders,\r\n            body: \"\",\r\n          };\r\n\r\n    const accessToken = getCookie(\"accessToken\");\r\n\r\n    if (accessToken) {\r\n      params.headers.Authorization = accessToken;\r\n    }\r\n\r\n    if (body) {\r\n      params.body = JSON.stringify(body);\r\n    }\r\n\r\n    const response = await fetch(`${url}`, params);\r\n    const result = await response.json();\r\n\r\n    if (result.success) {\r\n      return result;\r\n    }\r\n\r\n    if (result.message === \"jwt expired\") {\r\n      const result: { success: boolean; accessToken: string } = await refreshToken();\r\n\r\n      if (result.success) {\r\n        params.headers.Authorization = result.accessToken;\r\n        const response = await fetch(`${url}`, params);\r\n        return await response.json();\r\n      }\r\n      return result;\r\n    }\r\n    return result;\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\n\r\nexport const resetPassword = async (email: string) => request(`${URL}/password-reset`, { email }, \"POST\");\r\n\r\nexport const finalResetPassword = async (password: string, token: string) =>\r\n  request(`${URL}/password-reset/reset`, { password, token }, \"POST\");\r\n\r\nexport const registerUser = async (email: string, name: string, password: string) =>\r\n  request(`${URL}/auth/register`, { email, name, password }, \"POST\");\r\n\r\nexport const signIn = async (email: string, password: string) => {\r\n  const result = await request(`${URL}/auth/login`, { email, password }, \"POST\");\r\n  if (result.success) {\r\n    setCookie(\"accessToken\", result.accessToken);\r\n    localStorage.setItem(\"refreshToken\", result.refreshToken);\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const signOut = async () => {\r\n  const result = await request(`${URL}/auth/logout`, { token: localStorage.getItem(\"refreshToken\") }, \"POST\");\r\n  if (result.success) {\r\n    deleteCookie(\"accessToken\");\r\n    localStorage.removeItem(\"refreshToken\");\r\n  }\r\n  return result;\r\n};\r\n\r\nconst refreshToken = async () => {\r\n  const token = localStorage.getItem(\"refreshToken\");\r\n  if (!token) {\r\n    return { sussess: false };\r\n  }\r\n  const result = await request(`${URL}/auth/token`, { token: token }, \"POST\");\r\n  if (result.success) {\r\n    setCookie(\"accessToken\", result.accessToken);\r\n    localStorage.setItem(\"refreshToken\", result.refreshToken);\r\n  } else {\r\n    deleteCookie(\"accessToken\");\r\n    localStorage.removeItem(\"refreshToken\");\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const getCookie = (name: string) => {\r\n  const matches = document.cookie.match(\r\n    new RegExp(\"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, \"\\\\$1\") + \"=([^;]*)\") //eslint-disable-line\r\n  );\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n};\r\n\r\nexport const setCookie = (name: string, value: string, props?: any) => {\r\n  props = props || {};\r\n  let exp = props.expires;\r\n  if (typeof exp == \"number\" && exp) {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + exp * 1000);\r\n    exp = props.expires = d;\r\n  }\r\n  if (exp && exp.toUTCString) {\r\n    props.expires = exp.toUTCString();\r\n  }\r\n  value = encodeURIComponent(value);\r\n  let updatedCookie = name + \"=\" + value;\r\n  for (const propName in props) {\r\n    updatedCookie += \"; \" + propName;\r\n    const propValue = props[propName];\r\n    if (propValue !== true) {\r\n      updatedCookie += \"=\" + propValue;\r\n    }\r\n  }\r\n  document.cookie = updatedCookie;\r\n};\r\n\r\nexport const deleteCookie = (name: string) => {\r\n  setCookie(name, \"\", { expires: -1 });\r\n};\r\n","import React, { useState, useEffect, useCallback, FC } from \"react\";\r\nimport styles from \"./burger-constructor.module.css\";\r\nimport { ConstructorElement, CurrencyIcon, Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useSelector, useDispatch } from \"../../services/hooks\";\r\nimport { useDrop } from \"react-dnd\";\r\nimport { getOrderDetails } from \"../../services/actions\";\r\nimport { BurgerConstructorElement } from \"./burger-constructor-element\";\r\nimport { DELETE_ELEMENT, ADD_ELEMENT, MOVE_ELEMENT } from \"../../services/actions\";\r\nimport update from \"immutability-helper\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { getCookie } from \"../../services/auth\";\r\nimport { TIngredient } from \"../../services/actions\";\r\n\r\ntype TProps = {\r\n  openWindow: () => void;\r\n};\r\n\r\nconst BurgerConstructor: FC<TProps> = ({ openWindow }) => {\r\n  const dispatch = useDispatch();\r\n  const elements = useSelector((store) => store.order.elements);\r\n  const [cards, setCards] = useState<TIngredient[]>(elements);\r\n  const history = useHistory();\r\n  const signIn: string = getCookie(\"accessToken\") || \"\";\r\n\r\n  useEffect(() => {\r\n    setCards(elements);\r\n  }, [elements]);\r\n\r\n  const formOrder = () => {\r\n    openWindow();\r\n    const [bun] = elements.filter((e: TIngredient) => e.type === \"bun\");\r\n    const orderElements = [...elements, bun];\r\n    dispatch(getOrderDetails(orderElements, signIn));\r\n  };\r\n  const deleteElement = (e: TIngredient) => {\r\n    dispatch({ type: DELETE_ELEMENT, id: e._id });\r\n  };\r\n  const [, dropTarget] = useDrop({\r\n    accept: \"e\",\r\n    drop(element) {\r\n      dispatch({ type: ADD_ELEMENT, element: element });\r\n    },\r\n  });\r\n  const [, dropTargetInOrder] = useDrop({\r\n    accept: \"inOrder\",\r\n    drop(element) {\r\n      dispatch({\r\n        type: MOVE_ELEMENT,\r\n        cards: cards,\r\n      });\r\n    },\r\n  });\r\n  const moveCard = useCallback(\r\n    (dragIndex, hoverIndex) => {\r\n      const dragCard = cards[dragIndex];\r\n      setCards(\r\n        update(cards, {\r\n          $splice: [\r\n            [dragIndex, 1],\r\n            [hoverIndex, 0, dragCard],\r\n          ],\r\n        })\r\n      );\r\n    },\r\n    [cards]\r\n  );\r\n  const handleOrder = () => {\r\n    if (elements.find((e: TIngredient) => e.type === \"bun\")) {\r\n      if (signIn) {\r\n        formOrder();\r\n      } else {\r\n        history.push(\"/login\");\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <section className={styles.container}>\r\n      <div ref={dropTarget} className={styles.locked}>\r\n        <ul className={styles.list}>\r\n          {elements.map(\r\n            (e: TIngredient) =>\r\n              e.type === \"bun\" && (\r\n                <li className={styles.element + \" mb-4 mr-2 ml-4 pl-8\"} key={e._id + \"1\"}>\r\n                  <ConstructorElement\r\n                    type=\"top\"\r\n                    isLocked={true}\r\n                    text={e.name + \" (верх)\"}\r\n                    price={e.price}\r\n                    thumbnail={e.image}\r\n                  />\r\n                </li>\r\n              )\r\n          )}\r\n          <div ref={dropTargetInOrder} className={styles.ingredients}>\r\n            <ul className={styles.list}>\r\n              {!elements.length && <li className={styles.space + \" text text_type_main-large\"}></li>}\r\n              {elements.map((e: TIngredient, i: number) =>\r\n                e.type !== \"bun\" ? (\r\n                  <BurgerConstructorElement\r\n                    key={i}\r\n                    e={e}\r\n                    onClose={() => deleteElement(e)}\r\n                    index={i}\r\n                    id={e._id}\r\n                    moveCard={moveCard}\r\n                  />\r\n                ) : null\r\n              )}\r\n            </ul>\r\n          </div>\r\n          {elements.map(\r\n            (e: TIngredient) =>\r\n              e.type === \"bun\" && (\r\n                <li className={styles.element + \" mr-2 ml-4 pl-8\"} key={e._id + \"2\"}>\r\n                  <ConstructorElement\r\n                    type=\"bottom\"\r\n                    isLocked={true}\r\n                    text={e.name + \" (низ)\"}\r\n                    price={e.price}\r\n                    thumbnail={e.image}\r\n                  />\r\n                </li>\r\n              )\r\n          )}\r\n        </ul>\r\n      </div>\r\n      <div className={styles.order + \" pt-10 pr-4 pl-4\"}>\r\n        <div className={styles.flex + \" mr-10\"}>\r\n          <p className=\"pr-2 text text_type_digits-medium\">\r\n            {elements\r\n              .filter((e: TIngredient) => e.type !== \"bun\")\r\n              .reduce((sum: number, e: TIngredient) => sum + e.price, 0) +\r\n              elements\r\n                .filter((e: TIngredient) => e.type === \"bun\")\r\n                .reduce((sum: number, e: TIngredient) => sum + e.price * 2, 0)}\r\n          </p>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>\r\n        <Button type=\"primary\" size=\"large\" onClick={handleOrder}>\r\n          Оформить заказ\r\n        </Button>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default BurgerConstructor;\r\n","import React, { FC } from \"react\";\r\nimport styles from \"./order-details.module.css\";\r\nimport { CheckMarkIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useSelector } from \"../../services/hooks\";\r\n\r\ntype TProps = {\r\n  onClose: (e: any) => void;\r\n};\r\n\r\nconst OrderDetails: FC<TProps> = ({ onClose }) => {\r\n  const order = useSelector((store) => store.order);\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.flex} onClick={onClose}>\r\n        {order.number ? (\r\n          <p className=\"text text_type_digits-large mt-20\"> {order.number}</p>\r\n        ) : (\r\n          <p className={styles.loading + \" text text_type_main-large mt-20\"}>Загрузка</p>\r\n        )}\r\n        <div className=\"text text_type_main-medium mt-8\">идентификатор заказа</div>\r\n        <div className=\"mb-25 mt-25 pt-1 pb-1\">\r\n          <CheckMarkIcon type=\"primary\" />\r\n        </div>\r\n        <p className=\"text text_type_main-default mb-2\">Ваш заказ начали готовить</p>\r\n        <p className=\"text text_type_main-default text_color_inactive mb-20\">\r\n          Дождитесь готовности на орбитальной станции\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderDetails;\r\n","import React, { useState, useEffect, FC } from \"react\";\r\nimport styles from \"./index.module.css\";\r\nimport BurgerIngredients from \"../../burger-ingredients/burger-ingredients\";\r\nimport BurgerConstructor from \"../../burger-constructor/burger-constructor\";\r\nimport OrderDetails from \"../../order-details/order-details\";\r\nimport Modal from \"../../modal/modal\";\r\nimport { useDispatch } from \"../../../services/hooks\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { getData, TIngredient } from \"../../../services/actions\";\r\nimport { DELETE_ORDER } from \"../../../services/actions\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst Main: FC = () => {\r\n  const [isOrderDetailsOpen, setOrderDetailsOpen] = useState<boolean>(false);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    dispatch(getData());\r\n  }, [dispatch]);\r\n\r\n  const openIngredientDetails = (e: TIngredient) => {\r\n    history.push(`/ingredients/${e._id}`, { background: history.location });\r\n  };\r\n\r\n  const openOrderDetails = () => {\r\n    setOrderDetailsOpen(!isOrderDetailsOpen);\r\n  };\r\n\r\n  const closeOrderModal = () => {\r\n    dispatch({ type: DELETE_ORDER });\r\n    setOrderDetailsOpen(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <main className={styles.container}>\r\n        <DndProvider backend={HTML5Backend}>\r\n          <BurgerIngredients openWindow={openIngredientDetails} />\r\n          <BurgerConstructor openWindow={openOrderDetails} />\r\n        </DndProvider>\r\n      </main>\r\n      {isOrderDetailsOpen && (\r\n        <Modal onClose={() => closeOrderModal()}>\r\n          <OrderDetails onClose={setOrderDetailsOpen} />\r\n        </Modal>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","import React, { useState, useEffect, useCallback, FC, FormEvent, ChangeEvent } from \"react\";\r\nimport { useDispatch, useSelector } from \"../../../services/hooks\";\r\nimport styles from \"./index.module.css\";\r\nimport { Input, PasswordInput, Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { request, signOut } from \"../../../services/auth\";\r\nimport { SIGN_OUT } from \"../../../services/actions\";\r\nimport { RootStateOrAny } from \"react-redux\";\r\nimport { URL } from \"../../../services/actions\";\r\n\r\nconst Profile: FC = () => {\r\n  const [name, setName] = useState<string>(\"\");\r\n  const [email, setEmail] = useState<string>(\"\");\r\n  const [password, setPassword] = useState<string>(\"\");\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const { accessToken } = useSelector((state: RootStateOrAny) => state.auth);\r\n  const [edit, setEdit] = useState<boolean>(false);\r\n\r\n  const getData = useCallback(async () => {\r\n    try {\r\n      const result = await request(`${URL}/auth/user`, null, \"GET\", accessToken);\r\n      if (result.success) {\r\n        return { ...result.user };\r\n      } else {\r\n        return { name: \"\", email: \"\" };\r\n      }\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  }, [accessToken]);\r\n\r\n  const setData = useCallback(\r\n    async (data) => {\r\n      return await request(`${URL}/auth/user`, data, \"PATCH\", accessToken);\r\n    },\r\n    [accessToken]\r\n  );\r\n\r\n  const changeName = (e: ChangeEvent<HTMLInputElement>) => {\r\n    setName(e.target.value);\r\n    setEdit(true);\r\n  };\r\n\r\n  const changeEmail = (e: ChangeEvent<HTMLInputElement>) => {\r\n    setEmail(e.target.value);\r\n    setEdit(true);\r\n  };\r\n\r\n  const changeProfile = async (e: FormEvent) => {\r\n    e.preventDefault();\r\n    setData({ name: name, email: email });\r\n    setEdit(false);\r\n  };\r\n\r\n  const cancelChanges = async () => {\r\n    try {\r\n      const { name, email } = await getData();\r\n      setName(name);\r\n      setEmail(email);\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n    setEdit(false);\r\n  };\r\n\r\n  const handleSignOut = async () => {\r\n    const result = await signOut();\r\n    if (result.success) {\r\n      dispatch({ type: SIGN_OUT });\r\n      history.replace({ pathname: \"/login\" });\r\n    } else {\r\n      console.log(result.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const { name, email } = await getData();\r\n        setName(name);\r\n        setEmail(email);\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [getData]);\r\n\r\n  return (\r\n    <div className={styles.container + \" pt-30\"}>\r\n      <div className={styles.flex}>\r\n        <aside className={styles.aside + \" pl-5 pr-15\"}>\r\n          <div className={styles.link + \" text text_type_main-medium\"}>\r\n            <Link to=\"/profile\">Профиль</Link>\r\n          </div>\r\n          <div className={styles.link + \" text text_type_main-medium text_color_inactive\"}>\r\n            <Link to=\"/profile/orders\">История заказов</Link>\r\n          </div>\r\n          <div onClick={handleSignOut} className={styles.link + \" text text_type_main-medium text_color_inactive\"}>\r\n            <Link to=\"/login\">Выход</Link>\r\n          </div>\r\n          <div className={styles.info + \" pt-20 text text_type_main-default text_color_inactive\"}>\r\n            В этом разделе вы можете изменить свои персональные данные\r\n          </div>\r\n        </aside>\r\n        <div className={styles.inputs}>\r\n          <form className={styles.inputs + \" text_color_inactive\"} onSubmit={changeProfile}>\r\n            <Input name=\"name\" value={name} placeholder=\"Имя\" icon=\"EditIcon\" onChange={changeName} />\r\n            <div className={styles.inputs + \" mt-6 mb-6 text_color_inactive\"}>\r\n              <Input name=\"email\" value={email} placeholder=\"Логин\" icon=\"EditIcon\" onChange={changeEmail} />\r\n            </div>\r\n            <PasswordInput name=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} />\r\n            {edit && (\r\n              <div className=\"pt-6 pb-2\">\r\n                <Button>Сохранить</Button>\r\n              </div>\r\n            )}\r\n          </form>\r\n          {edit && (\r\n            <Button type=\"secondary\" onClick={cancelChanges}>\r\n              Отменить\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import React, { FormEvent, useState } from \"react\";\r\nimport styles from \"./index.module.css\";\r\nimport { EmailInput, Button, PasswordInput } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { signIn } from \"../../../services/auth\";\r\nimport { SIGN_IN } from \"../../../services/actions\";\r\nimport { useDispatch } from \"../../../services/hooks\";\r\n\r\nconst Login = () => {\r\n  const [email, setEmail] = useState<string>(\"\");\r\n  const [password, setPassword] = useState<string>(\"\");\r\n  const dispatch = useDispatch();\r\n  const history = useHistory<any>();\r\n\r\n  const handleLogin = async (e: FormEvent) => {\r\n    e.preventDefault();\r\n    const result = await signIn(email, password);\r\n    if (result.success) {\r\n      dispatch({ type: SIGN_IN });\r\n      history.replace((history.location.state && history.location.state.from.pathname) || \"/\");\r\n    } else {\r\n      console.log(result.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.flex}>\r\n      <form className={styles.flex} onSubmit={handleLogin}>\r\n        <div className=\"text text_type_main-medium pt-15\">Вход</div>\r\n        <div className={styles.input + \" pt-6\"}>\r\n          <EmailInput onChange={(e) => setEmail(e.target.value)} name=\"email\" value={email} />\r\n        </div>\r\n        <div className={styles.input + \" pt-6 pb-6\"}>\r\n          <PasswordInput onChange={(e) => setPassword(e.target.value)} name=\"password\" value={password} />\r\n        </div>\r\n        <Button>Войти</Button>\r\n      </form>\r\n      <div className=\"pt-20 text text_type_main-default text_color_inactive\">\r\n        Вы - новый пользователь?\r\n        <Link className=\" pl-2\" to=\"/register\">\r\n          Зарегистрироваться\r\n        </Link>\r\n      </div>\r\n      <div className=\"pt-4 text text_type_main-default text_color_inactive\">\r\n        Забыли пароль?\r\n        <Link className=\"pl-2\" to=\"/forgot-password\">\r\n          Восстановить пароль\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState, FC, FormEvent } from \"react\";\r\nimport styles from \"./index.module.css\";\r\nimport { Input, EmailInput, Button, PasswordInput } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { registerUser } from \"../../../services/auth\";\r\n\r\nconst Register: FC = () => {\r\n  const [name, setName] = useState<string>(\"\");\r\n  const [email, setEmail] = useState<string>(\"\");\r\n  const [password, setPassword] = useState<string>(\"\");\r\n\r\n  const history = useHistory();\r\n\r\n  const handleRegister = async (e: FormEvent) => {\r\n    e.preventDefault();\r\n    const result = await registerUser(email, password, name);\r\n    if (result.success) {\r\n      history.push(\"/\");\r\n    } else {\r\n      console.log(result.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.flex}>\r\n      <form className={styles.flex} onSubmit={handleRegister}>\r\n        <div className=\"text text_type_main-medium pt-15\">Регистрация</div>\r\n        <div className={styles.input + \" pt-6\"}>\r\n          <Input value={name} placeholder=\"Имя\" icon=\"EditIcon\" onChange={(e) => setName(e.target.value)} />\r\n        </div>\r\n        <div className={styles.input + \" pt-6\"}>\r\n          <EmailInput onChange={(e) => setEmail(e.target.value)} name=\"email\" value={email} />\r\n        </div>\r\n        <div className={styles.input + \" pt-6 pb-6\"}>\r\n          <PasswordInput onChange={(e) => setPassword(e.target.value)} name=\"password\" value={password} />\r\n        </div>\r\n        <Button>Зарегистрироваться</Button>\r\n      </form>\r\n      <div className=\"pt-10 text text_type_main-default text_color_inactive\">\r\n        Уже зарегистрированы?\r\n        <Link className=\" pl-2\" to=\"/login\">\r\n          Войти\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","import React, { useState, FC } from \"react\";\r\nimport styles from \"./index.module.css\";\r\nimport { Input, Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\r\nimport { resetPassword } from \"../../../services/auth\";\r\n\r\nconst ForgotPassword: FC = () => {\r\n  const [email, setEmail] = useState<string>(\"\");\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  const handlePassword = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    const result = await resetPassword(email);\r\n    if (result.success) {\r\n      history.push({\r\n        pathname: \"/reset-password\",\r\n        state: {\r\n          from: location.pathname,\r\n        },\r\n      });\r\n    } else {\r\n      console.log(result.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.flex}>\r\n      <form className={styles.flex} onSubmit={handlePassword}>\r\n        <div className=\"text text_type_main-medium pt-15\">Восстановление пароля</div>\r\n        <div className={styles.input + \" pt-6 pb-6\"}>\r\n          <Input onChange={(e) => setEmail(e.target.value)} name=\"email\" value={email} placeholder={\"Укажите e-mail\"} />\r\n        </div>\r\n        <Button>Восстановить</Button>\r\n      </form>\r\n      <div className=\"pt-20 text text_type_main-default text_color_inactive\">\r\n        Вспомнили пароль?\r\n        <Link className=\" pl-2\" to=\"/login\">\r\n          Войти\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ForgotPassword;\r\n","import React, { useState, FC, FormEvent } from \"react\";\r\nimport styles from \"./index.module.css\";\r\nimport { Input, Button, PasswordInput } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { Link, useHistory, Redirect } from \"react-router-dom\";\r\nimport { finalResetPassword } from \"../../../services/auth\";\r\n\r\nconst ResetPassword: FC = () => {\r\n  const [password, setPassword] = useState<string>(\"\");\r\n  const [code, setCode] = useState<string>(\"\");\r\n  const history = useHistory();\r\n\r\n  const handlePassword = async (e: FormEvent) => {\r\n    e.preventDefault();\r\n    const result = await finalResetPassword(password, code);\r\n    if (result.success) {\r\n      history.push(\"/login\");\r\n    } else {\r\n      console.log(result.message);\r\n    }\r\n  };\r\n  if (!history?.location?.state?.from) {\r\n    return <Redirect to=\"/login\" />;\r\n  }\r\n\r\n  return (\r\n    <div className={styles.flex}>\r\n      <form className={styles.flex} onSubmit={handlePassword}>\r\n        <div className=\"text text_type_main-medium pt-15\">Восстановление пароля</div>\r\n        <div className={styles.input + \" pt-6 pb-6\"}>\r\n          <PasswordInput onChange={(e) => setPassword(e.target.value)} name=\"password\" value={password} />\r\n        </div>\r\n        <div className={styles.input + \" pb-6\"}>\r\n          <Input\r\n            onChange={(e) => setCode(e.target.value)}\r\n            name=\"email\"\r\n            value={code}\r\n            placeholder={\"Введите код из письма\"}\r\n          />\r\n        </div>\r\n        <Button>Сохранить</Button>\r\n      </form>\r\n      <div className=\"pt-20 text text_type_main-default text_color_inactive\">\r\n        Вспомнили пароль?\r\n        <Link className=\"pl-2\" to=\"/login\">\r\n          Войти\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ResetPassword;\r\n","import React, { FC } from \"react\";\r\nimport styles from \"./index.module.css\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Error404: FC = () => {\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className=\"mt-30 text text_type_main-large text_color_inactive\">Ошибка 404: страница не найдена</div>\r\n      <div className=\"mt-10 text text_type_main-large\">\r\n        <span className=\"text_color_inactive\">Но Вы можете </span>\r\n        <Link to=\"/\">перейти на главную страницу</Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Error404;\r\n","export const getDate = (date: Date) => {\r\n  const today: Date = new Date();\r\n  const theDate: Date = new Date(date);\r\n  let hours: number | string = theDate.getHours();\r\n  let minutes: number | string = theDate.getMinutes();\r\n  if (hours < 10) {\r\n    hours = \"0\" + hours;\r\n  }\r\n  if (minutes < 10) {\r\n    minutes = \"0\" + minutes;\r\n  }\r\n  today.setHours(0, 0, 0, 0);\r\n  theDate.setHours(0, 0, 0, 0);\r\n  let day: number | string = (+today - +theDate) / (24 * 60 * 60 * 1000);\r\n  if (day === 0) {\r\n    day = \"Сегодня\";\r\n  } else if (day === 1) {\r\n    day = \"Вчера\";\r\n  } else if (day > 1) {\r\n    day = day + \" дн. назад\";\r\n  }\r\n  const time: number = theDate.getTimezoneOffset() / 60;\r\n  return day + \", \" + hours + \":\" + minutes + \" i-GMT\" + (time > 0 ? time : \"+\" + time * -1);\r\n};\r\n","import React, { useEffect, useState, FC } from \"react\";\r\nimport { useSelector } from \"../../services/hooks\";\r\nimport { useLocation, Link } from \"react-router-dom\";\r\nimport styles from \"./feed.module.css\";\r\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { getDate } from \"../../services/utils\";\r\nimport { TIngredient, TOrder } from \"../../services/actions\";\r\n\r\ntype TProps = {\r\n  order: TOrder;\r\n  status: string | false;\r\n};\r\n\r\nexport const FeedElement: FC<TProps> = (props) => {\r\n  const { order, status } = props;\r\n  const location = useLocation();\r\n  const { ingredients } = useSelector((store) => store.ingredients);\r\n  const [elements, setElements] = useState<TIngredient[]>([]);\r\n  const [icons, setIcons] = useState<string[]>([]);\r\n  const [count, setCount] = useState<number>(0);\r\n  const [price, setPrice] = useState<number>(0);\r\n  const num: number = order.number;\r\n\r\n  useEffect(() => {\r\n    if (ingredients.length) {\r\n      let total = 0;\r\n      let elementsArr: TIngredient[] = [];\r\n      order?.ingredients?.forEach((e) => {\r\n        let elem: TIngredient = ingredients.filter((el: TIngredient) => el._id === e)[0];\r\n        if (elem?.price) {\r\n          elementsArr.push(elem);\r\n          total += elem.price;\r\n        }\r\n      });\r\n      setPrice(total);\r\n      setElements(elementsArr);\r\n    }\r\n  }, [ingredients, order.ingredients]);\r\n\r\n  useEffect(() => {\r\n    let images: string[] = [];\r\n    let elementsSet: Set<TIngredient> = new Set();\r\n    elements.forEach((e: TIngredient) => elementsSet.add(e));\r\n    elementsSet.forEach((el: TIngredient) => {\r\n      images.push(el.image_mobile);\r\n    });\r\n    setIcons(images);\r\n    setCount(images.length);\r\n  }, [elements]);\r\n\r\n  return (\r\n    <Link\r\n      key={num}\r\n      to={{\r\n        pathname: `${location.pathname}/${num}`,\r\n        state: { background: location },\r\n      }}\r\n      className={styles.link}\r\n    >\r\n      <section className={styles.container + \" p-6 mr-4 mb-4\"}>\r\n        <header className={styles.header}>\r\n          <p className=\"text text_type_digits-default\">{\"#\" + order.number}</p>\r\n          <p className=\"text text_type_main-default text_color_inactive\">{getDate(order.createdAt)}</p>\r\n        </header>\r\n        <div className=\"text text_type_main-medium pb-6 pt-6\">\r\n          {order.name}\r\n          {status && (\r\n            <div\r\n              className=\"text text_type_main-default pt-2\"\r\n              style={{ color: order.status === \"done\" ? \"#00CCCC\" : \"#FFFFFF\" }}\r\n            >\r\n              {order.status === \"done\" ? \"Выполнен\" : \"created\" ? \"Создан\" : \"pending\" ? \"Готовится\" : false}\r\n            </div>\r\n          )}\r\n        </div>\r\n        <footer className={styles.dflex}>\r\n          <div className={styles.flex}>\r\n            {icons.map((e, i) => {\r\n              let param = -i * 15;\r\n              return i <= 4 ? (\r\n                <div key={i} className={styles.image} style={{ left: param, zIndex: 100 - i }}>\r\n                  <img className={styles.icon} src={e} alt=\"\" />\r\n                </div>\r\n              ) : i === 5 ? (\r\n                <div key={i} className={styles.image} style={{ left: param, zIndex: 100 - i }}>\r\n                  <p className={styles.count + \" text text_type_digits-default\"}>{\"+\" + (count - 6)}</p>\r\n                  <img className={styles.plusicon} src={e} alt=\"\" />\r\n                </div>\r\n              ) : (\r\n                false\r\n              );\r\n            })}\r\n          </div>\r\n          <div className={styles.flex}>\r\n            <span className=\"text text_type_digits-default pr-2\">{price}</span>\r\n            <CurrencyIcon type=\"primary\" />\r\n          </div>\r\n        </footer>\r\n      </section>\r\n    </Link>\r\n  );\r\n};\r\n","import React, { useEffect, useState, FC } from \"react\";\r\nimport styles from \"./index.module.css\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { signOut } from \"../../../services/auth\";\r\nimport { SIGN_OUT, TOrder } from \"../../../services/actions\";\r\nimport { FeedElement } from \"../../feed-info/feed-element\";\r\nimport { getCookie } from \"../../../services/auth\";\r\nimport { WS_CONNECTION_START, WS_CONNECTION_CLOSED } from \"../../../services/actions\";\r\nimport { useSelector, useDispatch } from \"../../../services/hooks\";\r\nimport { RootStateOrAny } from \"react-redux\";\r\n\r\nconst Orders: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const { messages } = useSelector((store: RootStateOrAny) => store.messages);\r\n  const [orders, setOrders] = useState<TOrder[]>([]);\r\n  const token: string = getCookie(\"accessToken\")?.split(\" \")[1] || \"\";\r\n\r\n  const handleSignOut = async () => {\r\n    const result = await signOut();\r\n    if (result.success) {\r\n      dispatch({ type: SIGN_OUT });\r\n      history.replace({ pathname: \"/login\" });\r\n    } else {\r\n      console.log(result.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: WS_CONNECTION_START, payload: `wss://norma.nomoreparties.space/orders?token=${token}` });\r\n    return () => {\r\n      dispatch({ type: WS_CONNECTION_CLOSED });\r\n    };\r\n  }, [dispatch, token]);\r\n\r\n  useEffect(() => {\r\n    if (messages[0]?.orders) {\r\n      setOrders(messages[0].orders);\r\n    }\r\n  }, [messages]);\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.container}>\r\n        <div className={styles.flex + \" pt-30\"}>\r\n          <aside className={styles.aside + \" pl-5 pr-15\"}>\r\n            <div className={styles.link + \" text text_type_main-medium text_color_inactive\"}>\r\n              <Link to=\"/profile\">Профиль</Link>\r\n            </div>\r\n            <div className={styles.link + \" text text_type_main-medium\"}>\r\n              <Link to=\"/profile/orders\">История заказов</Link>\r\n            </div>\r\n            <div onClick={handleSignOut} className={styles.link + \" text text_type_main-medium text_color_inactive\"}>\r\n              <Link to=\"/login\">Выход</Link>\r\n            </div>\r\n            <div className={styles.info + \" pt-20 text text_type_main-default text_color_inactive\"}>\r\n              В этом разделе вы можете просмотреть свою историю заказов\r\n            </div>\r\n          </aside>\r\n        </div>\r\n        <div className={styles.orders + \" pt-10\"}>\r\n          {orders.length ? (\r\n            orders.map((e: TOrder) =>\r\n              e?.ingredients?.length ? <FeedElement key={e._id} order={e} status={\"done\"} /> : null\r\n            )\r\n          ) : (\r\n            <p className=\"text text_type_main-medium pt-4 pr-20\">Здесь будут ваши заказы</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Orders;\r\n","import React, { useState, useEffect, FC } from \"react\";\r\nimport styles from \"./index.module.css\";\r\nimport { useSelector, useDispatch } from \"../../../services/hooks\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { getOrderData, TIngredient } from \"../../../services/actions\";\r\nimport { getDate } from \"../../../services/utils\";\r\nimport { RootStateOrAny } from \"react-redux\";\r\n\r\nconst Order: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const [elements, setElements] = useState<TIngredient[]>([]);\r\n  const [price, setPrice] = useState<number>(0);\r\n  const { ingredients } = useSelector((store) => store.ingredients);\r\n  const { order } = useSelector((store: RootStateOrAny) => store.orderData);\r\n  const { id } = useParams<{ id: string }>();\r\n\r\n  useEffect(() => {\r\n    dispatch(getOrderData(id));\r\n  }, [dispatch, id]);\r\n\r\n  useEffect(() => {\r\n    if (ingredients.length) {\r\n      let total = 0;\r\n      order?.ingredients?.forEach((e: string) => {\r\n        let element = ingredients.filter((el: TIngredient) => el._id === e)[0];\r\n        total += element.price;\r\n      });\r\n\r\n      setPrice(total);\r\n\r\n      let elementsSet = new Set();\r\n      let elementsArr: TIngredient[] = [];\r\n      order?.ingredients?.forEach((e: TIngredient) => elementsSet.add(e));\r\n      elementsSet.forEach((el) => elementsArr.push(ingredients.filter((e: TIngredient) => e._id === el)[0]));\r\n      elementsArr.forEach((el) => (el.count = order.ingredients.filter((e: string) => e === el._id).length));\r\n\r\n      setElements(elementsArr);\r\n    }\r\n  }, [ingredients, order]);\r\n\r\n  return (\r\n    <section className={styles.container}>\r\n      <h1 className={styles.number + \" text text_type_digits-default pt-4\"}>{\"#\" + order.number}</h1>\r\n      <p className=\"text text_type_main-medium pt-10\">{order.name}</p>\r\n      <p className=\"text text_type_main-default pt-2\">\r\n        <span style={{ color: order.status === \"done\" ? \"#00CCCC\" : \"#FFFFFF\" }}>\r\n          {order.status === \"done\" ? \"Выполнен\" : \"created\" ? \"Создан\" : \"pending\" ? \"Готовится\" : false}\r\n        </span>\r\n      </p>\r\n      <p className=\"text text_type_main-medium pt-15 pb-4\">Состав:</p>\r\n      <div className={styles.details + \" pr-2\"}>\r\n        {elements &&\r\n          elements.map((e, i) => {\r\n            return (\r\n              <div key={i} className={styles.dflex + \" mt-4 pb-2\"}>\r\n                <div className={styles.flex}>\r\n                  <div className={styles.icon + \" mr-4\"}>\r\n                    <img className={styles.image} src={e.image_mobile} alt=\"\" />\r\n                  </div>\r\n                  <div className=\"text text_type_main-default\">{e.name}</div>\r\n                </div>\r\n                <div className={styles.flex + \" text text_type_digits-default\"}>\r\n                  <span className=\"pr-2\">\r\n                    {(e.count || 0) > 1 && e.count + \" x \"}\r\n                    {e.price}\r\n                  </span>\r\n                  <CurrencyIcon type=\"primary\" />\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n      </div>\r\n      <footer className={styles.dflex + \" mt-10 pr-2 pb-4\"}>\r\n        <p className=\"text text_type_main-default text_color_inactive\">{getDate(order.createdAt)}</p>\r\n        <div className={styles.flex + \" text text_type_digits-default\"}>\r\n          <span className=\"pr-2\">{price}</span>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </div>\r\n      </footer>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Order;\r\n","import React, { useEffect, useState, FC } from \"react\";\r\nimport { useSelector, useDispatch } from \"../../services/hooks\";\r\nimport { FeedElement } from \"./feed-element\";\r\nimport styles from \"./feed.module.css\";\r\nimport { WS_CONNECTION_START, WS_CONNECTION_CLOSED } from \"../../services/actions\";\r\nimport { TOrder } from \"../../services/actions\";\r\nimport { RootStateOrAny } from \"react-redux\";\r\n\r\nexport const FeedInfo: FC = () => {\r\n  const dispatch = useDispatch();\r\n  const { messages } = useSelector((store: RootStateOrAny) => store.messages);\r\n  const [orders, setOrders] = useState<TOrder[]>([]);\r\n  const [inOrder, setInOrder] = useState<TOrder[][]>([]);\r\n  const [ready, setReady] = useState<TOrder[][]>([]);\r\n  const [total, setTotal] = useState<number>(0);\r\n  const [totalToday, setTotalToday] = useState<number>(0);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: WS_CONNECTION_START, payload: \"wss://norma.nomoreparties.space/orders/all\" });\r\n    return () => {\r\n      dispatch({ type: WS_CONNECTION_CLOSED });\r\n    };\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (messages[0]?.orders) {\r\n      setOrders(messages[0].orders);\r\n      setTotal(messages[0].total);\r\n      setTotalToday(messages[0].totalToday);\r\n    }\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    if (orders.length) {\r\n      const inOrder = orders.filter((e: TOrder) => e.status === \"created\");\r\n      const ready = orders.filter((e: TOrder) => e.status === \"done\");\r\n      setInOrder(sliceByTen(inOrder));\r\n      setReady(sliceByTen(ready));\r\n    }\r\n  }, [orders]);\r\n\r\n  const sliceByTen = (arr: TOrder[]): TOrder[][] => {\r\n    let newArr = [];\r\n    for (let i = 0; i < arr.length; i += 10) {\r\n      newArr.push(arr.slice(i, i + 10));\r\n    }\r\n    return newArr;\r\n  };\r\n\r\n  return (\r\n    <div className={styles.wcontainer}>\r\n      <header className={styles.header + \" pl-4\"}>\r\n        <h1 className=\"text text_type_main-large pt-8 pb-6\">Лента заказов</h1>\r\n      </header>\r\n      <section className={styles.wflex + \" pl-4\"}>\r\n        <div className={styles.orders}>\r\n          {orders.length &&\r\n            orders.map((e: TOrder) =>\r\n              e?.ingredients?.length ? <FeedElement key={e._id} order={e} status={false} /> : null\r\n            )}\r\n        </div>\r\n        <div className={styles.data}>\r\n          <div className={styles.sflex}>\r\n            <section className=\"mr-8\">\r\n              <header className=\"text text_type_main-medium pb-6\">Готовы:</header>\r\n              <div className={styles.wrflex}>\r\n                {ready.length && ready[0].length ? (\r\n                  ready.map((elem: TOrder[], i: number) => (\r\n                    <div key={i} className={styles.cflex + \" mr-8 mb-8\"}>\r\n                      {elem.map((e: TOrder) => (\r\n                        <span key={e.number} className={styles.ready + \" text text_type_digits-default mb-2\"}>\r\n                          {e.number}\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  ))\r\n                ) : (\r\n                  <p className=\"text text_type_main-medium text_color_inactive\">нет</p>\r\n                )}\r\n              </div>\r\n            </section>\r\n            <section>\r\n              <header className=\"text text_type_main-medium pb-6\">В работе:</header>\r\n              <div className={styles.wrflex}>\r\n                {inOrder.length && inOrder[0].length ? (\r\n                  inOrder.map((elem: TOrder[], i: number) => (\r\n                    <div key={i} className={styles.cflex + \" mr-8 mb-8\"}>\r\n                      {elem.map((e: TOrder) => (\r\n                        <span key={e.number} className=\"text text_type_digits-default\">\r\n                          {e.number}\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  ))\r\n                ) : (\r\n                  <p className=\"text text_type_main-medium\">-</p>\r\n                )}\r\n              </div>\r\n            </section>\r\n          </div>\r\n          <p className=\"text text_type_main-medium pt-10\">Выполнено за все время:</p>\r\n          <p className=\"text text_type_digits-large\">{total}</p>\r\n          <p className=\"text text_type_main-medium pt-10\">Выполнено за сегодня:</p>\r\n          <p className=\"text text_type_digits-large\">{totalToday}</p>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n","import React, { FC } from \"react\";\r\n\r\nimport { FeedInfo } from \"../../feed-info/feed-info\";\r\n\r\nconst Feed: FC = () => {\r\n  return <FeedInfo />;\r\n};\r\n\r\nexport default Feed;\r\n","import React, { FC } from \"react\";\r\nimport { Redirect, Route, RouteProps } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute: FC<RouteProps> = ({ children, ...rest }) => {\r\n  const signIn = localStorage.getItem(\"refreshToken\");\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        signIn ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/login\",\r\n              state: { from: location },\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import React, { FC } from \"react\";\r\nimport { Redirect, Route, RouteProps } from \"react-router-dom\";\r\n\r\nconst LoginProtectedRoute: FC<RouteProps> = ({ children, ...rest }) => {\r\n  const signIn = localStorage.getItem(\"refreshToken\");\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        signIn ? (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/profile\",\r\n              state: { from: location },\r\n            }}\r\n          />\r\n        ) : (\r\n          children\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default LoginProtectedRoute;\r\n","import React, { useEffect, FC } from \"react\";\r\nimport styles from \"./app.module.css\"; //eslint-disable-line\r\nimport AppHeader from \"../app-header/app-header\";\r\nimport IngredientDetails from \"../ingredient-details/ingredient-details\";\r\nimport Modal from \"../modal/modal\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { getData } from \"../../services/actions\";\r\nimport Main from \"../pages/main\";\r\nimport Profile from \"../pages/profile\";\r\nimport Login from \"../pages/login\";\r\nimport Register from \"../pages/register\";\r\nimport ForgotPassword from \"../pages/forgot-password\";\r\nimport ResetPassword from \"../pages/reset-password\";\r\nimport Error404 from \"../pages/error-404\";\r\nimport Orders from \"../pages/orders\";\r\nimport Order from \"../pages/order\";\r\nimport Feed from \"../pages/feed\";\r\nimport { Route, Switch, useHistory, useLocation } from \"react-router-dom\";\r\nimport ProtectedRoute from \"../protected-route\";\r\nimport LoginProtectedRoute from \"../protected-route/login-protected\";\r\nimport { SIGN_IN } from \"../../services/actions\";\r\n\r\nconst App: FC = () => {\r\n  const location = useLocation();\r\n  const history = useHistory<History>();\r\n  const dispatch = useDispatch();\r\n  let background =\r\n    (history.action === \"PUSH\" || history.action === \"REPLACE\") && location.state && location.state.background;\r\n  const signIn = localStorage.getItem(\"refreshToken\");\r\n\r\n  useEffect(() => {\r\n    dispatch(getData());\r\n    if (signIn) {\r\n      dispatch({ type: SIGN_IN });\r\n    }\r\n  }, [dispatch, signIn]);\r\n\r\n  return (\r\n    <>\r\n      <AppHeader />\r\n      <Switch location={background || location}>\r\n        <Route path=\"/\" exact>\r\n          <Main />\r\n        </Route>\r\n        <LoginProtectedRoute path=\"/register\" exact>\r\n          <Register />\r\n        </LoginProtectedRoute>\r\n        <LoginProtectedRoute path=\"/login\" exact>\r\n          <Login />\r\n        </LoginProtectedRoute>\r\n        <Route path=\"/ingredients/:id\" exact>\r\n          <IngredientDetails />\r\n        </Route>\r\n        <LoginProtectedRoute path=\"/reset-password\" exact>\r\n          <ResetPassword />\r\n        </LoginProtectedRoute>\r\n        <ProtectedRoute path=\"/profile\" exact>\r\n          <Profile />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path=\"/profile/orders\" exact>\r\n          <Orders />\r\n        </ProtectedRoute>\r\n        <ProtectedRoute path=\"/profile/orders/:id\" exact>\r\n          <Order />\r\n        </ProtectedRoute>\r\n        <Route path=\"/feed\" exact>\r\n          <Feed />\r\n        </Route>\r\n        <Route path=\"/feed/:id\" exact>\r\n          <Order />\r\n        </Route>\r\n        <LoginProtectedRoute path=\"/forgot-password\" exact>\r\n          <ForgotPassword />\r\n        </LoginProtectedRoute>\r\n        <Route>\r\n          <Error404 />\r\n        </Route>\r\n      </Switch>\r\n      {background && (\r\n        <Route path=\"/ingredients/:id\">\r\n          <Modal onClose={() => history.goBack()}>\r\n            <IngredientDetails />\r\n          </Modal>\r\n        </Route>\r\n      )}\r\n      {background && (\r\n        <Route path=\"/feed/:id\">\r\n          <Modal onClose={() => history.goBack()}>\r\n            <Order />\r\n          </Modal>\r\n        </Route>\r\n      )}\r\n      {background && (\r\n        <Route path=\"/profile/orders/:id\">\r\n          <Modal onClose={() => history.goBack()}>\r\n            <Order />\r\n          </Modal>\r\n        </Route>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { SET_INGREDIENTS, SET_ELEMENT, TIngredientDetailsActions, TIngredient } from \"../actions\";\r\n\r\nexport type TState = {\r\n  ingredients: TIngredient[];\r\n  element: TIngredient;\r\n};\r\n\r\nconst initialState: TState = {\r\n  ingredients: [],\r\n  element: {\r\n    _id: \"\",\r\n    name: \"\",\r\n    type: \"\",\r\n    proteins: 0,\r\n    fat: 0,\r\n    carbohydrates: 0,\r\n    calories: 0,\r\n    price: 0,\r\n    image: \"\",\r\n    image_mobile: \"\",\r\n    image_large: \"\",\r\n    __v: 0,\r\n  },\r\n};\r\n\r\nexport const ingredientDetailsReducer = (state = initialState, action: TIngredientDetailsActions) => {\r\n  switch (action.type) {\r\n    case SET_INGREDIENTS: {\r\n      return {\r\n        ...state,\r\n        ingredients: action.ingredients,\r\n      };\r\n    }\r\n    case SET_ELEMENT: {\r\n      return {\r\n        ...state,\r\n        element: action.element,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import {\r\n  SET_ORDER_NUMBER,\r\n  ADD_ELEMENT,\r\n  DELETE_ELEMENT,\r\n  DELETE_ORDER,\r\n  MOVE_ELEMENT,\r\n  TOrderDetailsActions,\r\n  TIngredient,\r\n} from \"../actions\";\r\n\r\nexport type TState = {\r\n  number: string;\r\n  elements: TIngredient[];\r\n};\r\n\r\nconst initialState: TState = {\r\n  number: \"\",\r\n  elements: [],\r\n};\r\n\r\nexport const orderDetailsReducer = (state = initialState, action: TOrderDetailsActions) => {\r\n  switch (action.type) {\r\n    case SET_ORDER_NUMBER: {\r\n      return {\r\n        ...state,\r\n        number: action.number,\r\n      };\r\n    }\r\n    case ADD_ELEMENT: {\r\n      return action.element.type === \"bun\"\r\n        ? {\r\n            ...state,\r\n            elements: [...state.elements.filter((e) => e.type !== \"bun\"), { ...action.element }],\r\n          }\r\n        : {\r\n            ...state,\r\n            elements: [...state.elements, { ...action.element }],\r\n          };\r\n    }\r\n    case DELETE_ELEMENT: {\r\n      return {\r\n        ...state,\r\n        elements: state.elements.filter((e) => e !== state.elements.find((e) => e._id === action.id)),\r\n      };\r\n    }\r\n    case DELETE_ORDER: {\r\n      return {\r\n        ...state,\r\n        number: \"\",\r\n        elements: [],\r\n      };\r\n    }\r\n    case MOVE_ELEMENT:\r\n      return {\r\n        ...state,\r\n        elements: action.cards,\r\n      };\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { SIGN_IN, SIGN_OUT, TAuthActions } from \"../actions\";\r\n\r\nexport type TState = {\r\n  signIn: boolean;\r\n};\r\n\r\nconst initialState: TState = {\r\n  signIn: false,\r\n};\r\n\r\nexport const authReducer = (state = initialState, action: TAuthActions) => {\r\n  switch (action.type) {\r\n    case SIGN_IN: {\r\n      return {\r\n        ...state,\r\n        signIn: true,\r\n      };\r\n    }\r\n    case SIGN_OUT: {\r\n      return {\r\n        ...state,\r\n        signIn: false,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import {\r\n  WS_CONNECTION_SUCCESS,\r\n  WS_CONNECTION_ERROR,\r\n  WS_CONNECTION_CLOSED,\r\n  WS_GET_MESSAGE,\r\n  TConnectionActions,\r\n  TMessage,\r\n} from \"../actions\";\r\n\r\nexport type TState = {\r\n  wsConnected: boolean;\r\n  messages: TMessage[];\r\n  error: string;\r\n};\r\n\r\nconst initialState: TState = {\r\n  wsConnected: false,\r\n  messages: [],\r\n  error: \"\",\r\n};\r\n\r\nexport const wsReducer = (state = initialState, action: TConnectionActions) => {\r\n  switch (action.type) {\r\n    case WS_CONNECTION_SUCCESS:\r\n      return {\r\n        ...state,\r\n        error: \"\",\r\n        wsConnected: true,\r\n      };\r\n\r\n    case WS_CONNECTION_ERROR:\r\n      return {\r\n        ...state,\r\n        error: action.payload,\r\n        wsConnected: false,\r\n      };\r\n\r\n    case WS_CONNECTION_CLOSED:\r\n      return {\r\n        messages: [],\r\n        error: \"\",\r\n        wsConnected: false,\r\n      };\r\n\r\n    case WS_GET_MESSAGE:\r\n      return {\r\n        ...state,\r\n        error: \"\",\r\n        messages: [action.payload],\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { GET_ORDER, TGetOrderAction, TOrder } from \"../actions\";\r\n\r\nexport type TState = {\r\n  order: TOrder[];\r\n};\r\n\r\nconst initialState: TState = {\r\n  order: [],\r\n};\r\n\r\nexport const orderDataReducer = (state = initialState, action: TGetOrderAction) => {\r\n  switch (action.type) {\r\n    case GET_ORDER: {\r\n      return {\r\n        ...state,\r\n        order: action.order,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n","import { combineReducers } from \"redux\";\r\nimport { ingredientDetailsReducer } from \"./ingredient-details\";\r\nimport { orderDetailsReducer } from \"./order-details\";\r\nimport { authReducer } from \"./auth\";\r\nimport { wsReducer } from \"./ws\";\r\nimport { orderDataReducer } from \"./order-data\";\r\n\r\nexport const rootReducer = combineReducers({\r\n  auth: authReducer,\r\n  ingredients: ingredientDetailsReducer,\r\n  order: orderDetailsReducer,\r\n  messages: wsReducer,\r\n  orderData: orderDataReducer,\r\n});\r\n","import thunk from \"redux-thunk\";\r\nimport { createStore, applyMiddleware, compose } from \"redux\";\r\nimport { rootReducer } from \"./reducers\";\r\nimport { socketMiddleware } from \"./middleware\";\r\n\r\ndeclare global {\r\n  interface Window {\r\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\r\n  }\r\n}\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst enhancer = composeEnhancers(applyMiddleware(thunk), applyMiddleware(socketMiddleware()));\r\n\r\nexport const store = createStore(rootReducer, enhancer);\r\n","import {\r\n  WS_CONNECTION_START,\r\n  WS_CONNECTION_SUCCESS,\r\n  WS_CONNECTION_ERROR,\r\n  WS_CONNECTION_CLOSED,\r\n  WS_GET_MESSAGE,\r\n  WS_SEND_MESSAGE,\r\n  TConnectionActions,\r\n} from \"./actions\";\r\nimport { Dispatch } from \"redux\";\r\n\r\nexport const socketMiddleware = () => {\r\n  return (store: { dispatch: Dispatch<TConnectionActions> }) => {\r\n    let socket: WebSocket | null = null;\r\n\r\n    return (next: any) => (action: any) => {\r\n      const { dispatch } = store;\r\n      const { type, payload } = action;\r\n\r\n      if (type === WS_CONNECTION_START) {\r\n        socket = new WebSocket(payload);\r\n      }\r\n      if (socket) {\r\n        socket.onopen = (event: Event) => {\r\n          dispatch({ type: WS_CONNECTION_SUCCESS, payload: event });\r\n        };\r\n\r\n        socket.onerror = (event: any) => {\r\n          dispatch({ type: WS_CONNECTION_ERROR, payload: event });\r\n        };\r\n\r\n        socket.onmessage = (event: MessageEvent & { data: string }) => {\r\n          const { data } = event;\r\n          const parsedData = JSON.parse(data);\r\n          dispatch({ type: WS_GET_MESSAGE, payload: parsedData });\r\n        };\r\n\r\n        socket.onclose = (event: CloseEvent) => {\r\n          dispatch({ type: WS_CONNECTION_CLOSED, payload: event });\r\n        };\r\n\r\n        if (type === WS_SEND_MESSAGE) {\r\n          const message = payload;\r\n          socket.send(JSON.stringify(message));\r\n        }\r\n      }\r\n\r\n      next(action);\r\n    };\r\n  };\r\n};\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./components/app/app\";\r\nimport \"./index.css\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport { Provider } from \"react-redux\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport { store } from \"./services/store\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <Router>\r\n        <App />\r\n      </Router>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"burger-constructor_container__3FbLP\",\"locked\":\"burger-constructor_locked__2gLCG\",\"ingredients\":\"burger-constructor_ingredients__10Pqa\",\"element\":\"burger-constructor_element__28eg2\",\"list\":\"burger-constructor_list__1FLuC\",\"flex\":\"burger-constructor_flex__BQHva\",\"order\":\"burger-constructor_order__JZZ__\",\"space\":\"burger-constructor_space__x4-I8 burger-constructor_flex__BQHva\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"burger-ingredients_container__1-CBt\",\"ingredients\":\"burger-ingredients_ingredients__ADbYo\",\"flex\":\"burger-ingredients_flex__1hg_n\",\"element\":\"burger-ingredients_element__vqnvU\",\"list\":\"burger-ingredients_list__3pJi9\",\"price\":\"burger-ingredients_price__3FBRU\",\"name\":\"burger-ingredients_name__1CXlr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"profile_container__1bGJf\",\"flex\":\"profile_flex__2jBdw\",\"aside\":\"profile_aside__36Spt\",\"link\":\"profile_link__tFkwt\",\"inputs\":\"profile_inputs__2_HGU\",\"info\":\"profile_info__17mQs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"order_container__2dnWZ\",\"flex\":\"order_flex__2CfrR\",\"dflex\":\"order_dflex__1CtUa order_flex__2CfrR\",\"details\":\"order_details__1oW18\",\"icon\":\"order_icon__3DsA4\",\"image\":\"order_image__d0JDF\",\"number\":\"order_number__3UnnX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ingredient-details_container__13vWF\",\"flex\":\"ingredient-details_flex__1io2A\",\"structure\":\"ingredient-details_structure__3DrCb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"orders_container__11LIU\",\"flex\":\"orders_flex__1bHtk\",\"aside\":\"orders_aside__Nm8kP\",\"link\":\"orders_link__rn8_o\",\"inputs\":\"orders_inputs__3q5bg\",\"info\":\"orders_info__2fMzT\",\"orders\":\"orders_orders__Iik6l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__2kNdI\",\"container\":\"app-header_container__2dnkR\",\"logomenu\":\"app-header_logomenu__1YgMM\",\"menu\":\"app-header_menu__3iOB0\",\"btn\":\"app-header_btn__3HD0Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"flex\":\"register_flex__38esQ\",\"input\":\"register_input__22xQk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"flex\":\"login_flex__8RBz9\",\"input\":\"login_input__YgEfy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"flex\":\"reset-password_flex__307ZE\",\"input\":\"reset-password_input__6tSaD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"modal_container__T_itw\",\"btn\":\"modal_btn__8Itn6\",\"overlay\":\"modal_overlay__3FH2d\",\"wrap\":\"modal_wrap__2jMq4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"order-details_container__mx1j3\",\"flex\":\"order-details_flex__gkQ4d\",\"loading\":\"order-details_loading__2XyoQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"flex\":\"forgot-password_flex__1bf3Y\",\"input\":\"forgot-password_input__rs3mc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"modal-overlay_container__3yNZd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"main_container__csY2k\"};"],"sourceRoot":""}